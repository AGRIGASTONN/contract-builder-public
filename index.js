(()=>{var e={829:(e,t,n)=>{e.exports=function e(t,n,r){function s(o,a){if(!n[o]){if(!t[o]){if(i)return i(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,(function(e){return s(t[o][1][e]||e)}),c,c.exports,e,t,n,r)}return n[o].exports}for(var i=void 0,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(e,t,n){"use strict";var r,s="undefined"!=typeof window?window:"undefined"!=typeof self?self:null;r=s?"signal"in new Request("https://airtable.com")?s.AbortController:e("abortcontroller-polyfill/dist/cjs-ponyfill").AbortController:e("abort-controller"),t.exports=r},{"abort-controller":20,"abortcontroller-polyfill/dist/cjs-ponyfill":19}],2:[function(e,t,n){"use strict";var r=function(){function e(e,t,n){this.error=e,this.message=t,this.statusCode=n}return e.prototype.toString=function(){return[this.message,"(",this.error,")",this.statusCode?"[Http code "+this.statusCode+"]":""].join("")},e}();t.exports=r},{}],3:[function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},r.apply(this,arguments)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=s(e("lodash/get")),o=s(e("lodash/isPlainObject")),a=s(e("lodash/keys")),l=s(e("./fetch")),c=s(e("./abort-controller")),u=s(e("./object_to_query_param_string")),d=s(e("./airtable_error")),h=s(e("./table")),p=s(e("./http_headers")),f=s(e("./run_action")),m=s(e("./package_version")),g=s(e("./exponential_backoff_with_jitter")),b="Airtable.js/"+m.default,_=function(){function e(e,t){this._airtable=e,this._id=t}return e.prototype.table=function(e){return new h.default(this,null,e)},e.prototype.makeRequest=function(e){var t,n=this;void 0===e&&(e={});var s=i.default(e,"method","GET").toUpperCase(),o=this._airtable._endpointUrl+"/v"+this._airtable._apiVersionMajor+"/"+this._id+i.default(e,"path","/")+"?"+u.default(i.default(e,"qs",{})),a=new c.default,h={method:s,headers:this._getRequestHeaders(Object.assign({},this._airtable._customHeaders,null!==(t=e.headers)&&void 0!==t?t:{})),signal:a.signal};"body"in e&&function(e){return"GET"!==e&&"DELETE"!==e}(s)&&(h.body=JSON.stringify(e.body));var p=setTimeout((function(){a.abort()}),this._airtable._requestTimeout);return new Promise((function(t,s){l.default(o,h).then((function(o){if(clearTimeout(p),429!==o.status||n._airtable._noRetryIfRateLimited)o.json().then((function(e){var r=n._checkStatusForError(o.status,e)||v(o.status,e);r?s(r):t({statusCode:o.status,headers:o.headers,body:e})})).catch((function(){var e=v(o.status);s(e)}));else{var a=i.default(e,"_numAttempts",0),l=g.default(a);setTimeout((function(){var i=r(r({},e),{_numAttempts:a+1});n.makeRequest(i).then(t).catch(s)}),l)}})).catch((function(e){clearTimeout(p),e=new d.default("CONNECTION_ERROR",e.message,null),s(e)}))}))},e.prototype.runAction=function(e,t,n,r,s){f.default(this,e,t,n,r,s,0)},e.prototype._getRequestHeaders=function(e){var t=new p.default;t.set("Authorization","Bearer "+this._airtable._apiKey),t.set("User-Agent",b),t.set("Content-Type","application/json");for(var n=0,r=a.default(e);n<r.length;n++){var s=r[n];t.set(s,e[s])}return t.toJSON()},e.prototype._checkStatusForError=function(e,t){var n=(null!=t?t:{error:{}}).error,r=void 0===n?{}:n,s=r.type,i=r.message;return 401===e?new d.default("AUTHENTICATION_REQUIRED","You should provide valid api key to perform this operation",e):403===e?new d.default("NOT_AUTHORIZED","You are not authorized to perform this operation",e):404===e?new d.default("NOT_FOUND",null!=i?i:"Could not find what you are looking for",e):413===e?new d.default("REQUEST_TOO_LARGE","Request body is too large",e):422===e?new d.default(null!=s?s:"UNPROCESSABLE_ENTITY",null!=i?i:"The operation cannot be processed",e):429===e?new d.default("TOO_MANY_REQUESTS","You have made too many requests in a short period of time. Please retry your request later",e):500===e?new d.default("SERVER_ERROR","Try again. If the problem persists, contact support.",e):503===e?new d.default("SERVICE_UNAVAILABLE","The service is temporarily unavailable. Please retry shortly.",e):e>=400?new d.default(null!=s?s:"UNEXPECTED_ERROR",null!=i?i:"An unexpected error occurred",e):null},e.prototype.doCall=function(e){return this.table(e)},e.prototype.getId=function(){return this._id},e.createFunctor=function(t,n){var r=new e(t,n),s=function(e){return r.doCall(e)};return s._base=r,s.table=r.table.bind(r),s.makeRequest=r.makeRequest.bind(r),s.runAction=r.runAction.bind(r),s.getId=r.getId.bind(r),s},e}();function v(e,t){return o.default(t)?null:new d.default("UNEXPECTED_ERROR","The response from Airtable was invalid JSON. Please try again soon.",e)}t.exports=_},{"./abort-controller":1,"./airtable_error":2,"./exponential_backoff_with_jitter":6,"./fetch":7,"./http_headers":9,"./object_to_query_param_string":11,"./package_version":12,"./run_action":16,"./table":17,"lodash/get":77,"lodash/isPlainObject":89,"lodash/keys":93}],4:[function(e,t,n){"use strict";t.exports=function(e,t,n){return void 0===n&&(n=void 0),function(){for(var r,s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];if("function"!=typeof s[r=void 0===n?s.length>0?s.length-1:0:n]){for(var o=[],a=Math.max(s.length,r),l=0;l<a;l++)o.push(s[l]);return new Promise((function(n,r){o.push((function(e,t){e?r(e):n(t)})),e.apply(t,o)}))}e.apply(t,s)}}},{}],5:[function(e,t,n){"use strict";var r={};t.exports=function(e,t,n){return function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];r[t]||(r[t]=!0,console.warn(n)),e.apply(this,s)}}},{}],6:[function(e,t,n){"use strict";var r=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(e("./internal_config.json"));t.exports=function(e){var t=r.default.INITIAL_RETRY_DELAY_IF_RATE_LIMITED*Math.pow(2,e),n=Math.min(r.default.MAX_RETRY_DELAY_IF_RATE_LIMITED,t);return Math.random()*n}},{"./internal_config.json":10}],7:[function(e,t,n){"use strict";var r=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(e("node-fetch")),s="undefined"!=typeof window?window:"undefined"!=typeof self?self:null;t.exports=s?s.fetch.bind(s):r.default},{"node-fetch":20}],8:[function(e,t,n){"use strict";t.exports=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},{}],9:[function(e,t,n){"use strict";var r=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(e("lodash/keys")),s="undefined"!=typeof window,i=function(){function e(){this._headersByLowercasedKey={}}return e.prototype.set=function(e,t){var n=e.toLowerCase();"x-airtable-user-agent"===n&&(n="user-agent",e="User-Agent"),this._headersByLowercasedKey[n]={headerKey:e,headerValue:t}},e.prototype.toJSON=function(){for(var e={},t=0,n=r.default(this._headersByLowercasedKey);t<n.length;t++){var i=n[t],o=this._headersByLowercasedKey[i];e[s&&"user-agent"===i?"X-Airtable-User-Agent":o.headerKey]=o.headerValue}return e},e}();t.exports=i},{"lodash/keys":93}],10:[function(e,t,n){t.exports={INITIAL_RETRY_DELAY_IF_RATE_LIMITED:5e3,MAX_RETRY_DELAY_IF_RATE_LIMITED:6e5}},{}],11:[function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=r(e("lodash/isArray")),i=r(e("lodash/isNil")),o=r(e("lodash/keys"));function a(e,t,n){if(s.default(t))for(var r=0;r<t.length;r++){var i=t[r];/\[\]$/.test(e)?n(e,i):a(e+"["+("object"==typeof i&&null!==i?r:"")+"]",i,n)}else if("object"==typeof t)for(var l=0,c=o.default(t);l<c.length;l++){var u=c[l];a(e+"["+u+"]",i=t[u],n)}else n(e,t)}t.exports=function(e){for(var t=[],n=function(e,n){n=i.default(n)?"":n,t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,s=o.default(e);r<s.length;r++){var l=s[r];a(l,e[l],n)}return t.join("&").replace(/%20/g,"+")}},{"lodash/isArray":79,"lodash/isNil":85,"lodash/keys":93}],12:[function(e,t,n){"use strict";t.exports="0.12.2"},{}],13:[function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},r.apply(this,arguments)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=s(e("lodash/isFunction")),o=s(e("lodash/keys")),a=s(e("./record")),l=s(e("./callback_to_promise")),c=s(e("./has")),u=e("./query_params"),d=s(e("./object_to_query_param_string")),h=function(){function e(e,t){this._table=e,this._params=t,this.firstPage=l.default(p,this),this.eachPage=l.default(f,this,1),this.all=l.default(m,this)}return e.validateParams=function(t){for(var n={},r=[],s=[],i=0,a=o.default(t);i<a.length;i++){var l=a[i],u=t[l];if(c.default(e.paramValidators,l)){var d=(0,e.paramValidators[l])(u);d.pass?n[l]=u:s.push(d.error)}else r.push(l)}return{validParams:n,ignoredKeys:r,errors:s}},e.paramValidators=u.paramValidators,e}();function p(e){if(!i.default(e))throw new Error("The first parameter to `firstPage` must be a function");this.eachPage((function(t){e(null,t)}),(function(t){e(t,null)}))}function f(e,t){var n=this;if(!i.default(e))throw new Error("The first parameter to `eachPage` must be a function");if(!i.default(t)&&void 0!==t)throw new Error("The second parameter to `eachPage` must be a function or undefined");var s,o,l=r({},this._params),c="/"+this._table._urlEncodedNameOrId()+"?"+d.default(l),h={},p=null;if("post"===l.method||c.length>u.URL_CHARACTER_LENGTH_LIMIT){p=l,s="post",o="/"+this._table._urlEncodedNameOrId()+"/listRecords";for(var f=0,m=Object.keys(l);f<m.length;f++){var g=m[f];u.shouldListRecordsParamBePassedAsParameter(g)?h[g]=l[g]:p[g]=l[g]}}else s="get",h=l,o="/"+this._table._urlEncodedNameOrId();var b=function(){n._table._base.runAction(s,o,h,p,(function(r,s,i){if(r)t(r,null);else{var o=void 0;i.offset?(l.offset=i.offset,o=b):o=function(){t(null)};var c=i.records.map((function(e){return new a.default(n._table,null,e)}));e(c,o)}}))};b()}function m(e){if(!i.default(e))throw new Error("The first parameter to `all` must be a function");var t=[];this.eachPage((function(e,n){t.push.apply(t,e),n()}),(function(n){n?e(n,null):e(null,t)}))}t.exports=h},{"./callback_to_promise":4,"./has":8,"./object_to_query_param_string":11,"./query_params":14,"./record":15,"lodash/isFunction":83,"lodash/keys":93}],14:[function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.shouldListRecordsParamBePassedAsParameter=n.URL_CHARACTER_LENGTH_LIMIT=n.paramValidators=void 0;var s=r(e("./typecheck")),i=r(e("lodash/isString")),o=r(e("lodash/isNumber")),a=r(e("lodash/isPlainObject")),l=r(e("lodash/isBoolean"));n.paramValidators={fields:s.default(s.default.isArrayOf(i.default),"the value for `fields` should be an array of strings"),filterByFormula:s.default(i.default,"the value for `filterByFormula` should be a string"),maxRecords:s.default(o.default,"the value for `maxRecords` should be a number"),pageSize:s.default(o.default,"the value for `pageSize` should be a number"),offset:s.default(o.default,"the value for `offset` should be a number"),sort:s.default(s.default.isArrayOf((function(e){return a.default(e)&&i.default(e.field)&&(void 0===e.direction||["asc","desc"].includes(e.direction))})),'the value for `sort` should be an array of sort objects. Each sort object must have a string `field` value, and an optional `direction` value that is "asc" or "desc".'),view:s.default(i.default,"the value for `view` should be a string"),cellFormat:s.default((function(e){return i.default(e)&&["json","string"].includes(e)}),'the value for `cellFormat` should be "json" or "string"'),timeZone:s.default(i.default,"the value for `timeZone` should be a string"),userLocale:s.default(i.default,"the value for `userLocale` should be a string"),method:s.default((function(e){return i.default(e)&&["get","post"].includes(e)}),'the value for `method` should be "get" or "post"'),returnFieldsByFieldId:s.default(l.default,"the value for `returnFieldsByFieldId` should be a boolean"),recordMetadata:s.default(s.default.isArrayOf(i.default),"the value for `recordMetadata` should be an array of strings")},n.URL_CHARACTER_LENGTH_LIMIT=15e3,n.shouldListRecordsParamBePassedAsParameter=function(e){return"timeZone"===e||"userLocale"===e}},{"./typecheck":18,"lodash/isBoolean":81,"lodash/isNumber":86,"lodash/isPlainObject":89,"lodash/isString":90}],15:[function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},r.apply(this,arguments)},s=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(e("./callback_to_promise")),i=function(){function e(e,t,n){this._table=e,this.id=t||n.id,n&&(this.commentCount=n.commentCount),this.setRawJson(n),this.save=s.default(o,this),this.patchUpdate=s.default(a,this),this.putUpdate=s.default(l,this),this.destroy=s.default(c,this),this.fetch=s.default(u,this),this.updateFields=this.patchUpdate,this.replaceFields=this.putUpdate}return e.prototype.getId=function(){return this.id},e.prototype.get=function(e){return this.fields[e]},e.prototype.set=function(e,t){this.fields[e]=t},e.prototype.setRawJson=function(e){this._rawJson=e,this.fields=this._rawJson&&this._rawJson.fields||{}},e}();function o(e){this.putUpdate(this.fields,e)}function a(e,t,n){var s=this;n||(n=t,t={});var i=r({fields:e},t);this._table._base.runAction("patch","/"+this._table._urlEncodedNameOrId()+"/"+this.id,{},i,(function(e,t,r){e?n(e):(s.setRawJson(r),n(null,s))}))}function l(e,t,n){var s=this;n||(n=t,t={});var i=r({fields:e},t);this._table._base.runAction("put","/"+this._table._urlEncodedNameOrId()+"/"+this.id,{},i,(function(e,t,r){e?n(e):(s.setRawJson(r),n(null,s))}))}function c(e){var t=this;this._table._base.runAction("delete","/"+this._table._urlEncodedNameOrId()+"/"+this.id,{},null,(function(n){n?e(n):e(null,t)}))}function u(e){var t=this;this._table._base.runAction("get","/"+this._table._urlEncodedNameOrId()+"/"+this.id,{},null,(function(n,r,s){n?e(n):(t.setRawJson(s),e(null,t))}))}t.exports=i},{"./callback_to_promise":4}],16:[function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=r(e("./exponential_backoff_with_jitter")),i=r(e("./object_to_query_param_string")),o=r(e("./package_version")),a=r(e("./fetch")),l=r(e("./abort-controller")),c="Airtable.js/"+o.default;t.exports=function e(t,n,r,o,u,d,h){var p=t._airtable._endpointUrl+"/v"+t._airtable._apiVersionMajor+"/"+t._id+r+"?"+i.default(o),f={authorization:"Bearer "+t._airtable._apiKey,"x-api-version":t._airtable._apiVersion,"x-airtable-application-id":t.getId(),"content-type":"application/json"};"undefined"!=typeof window?f["x-airtable-user-agent"]=c:f["User-Agent"]=c;var m=new l.default,g=n.toUpperCase(),b={method:g,headers:f,signal:m.signal};null!==u&&("GET"===g||"HEAD"===g?console.warn("body argument to runAction are ignored with GET or HEAD requests"):b.body=JSON.stringify(u));var _=setTimeout((function(){m.abort()}),t._airtable._requestTimeout);a.default(p,b).then((function(i){if(clearTimeout(_),429!==i.status||t._airtable._noRetryIfRateLimited)i.json().then((function(e){var n=t._checkStatusForError(i.status,e),r={};Object.keys(i).forEach((function(e){r[e]=i[e]})),r.body=e,r.statusCode=i.status,d(n,r,e)})).catch((function(){d(t._checkStatusForError(i.status))}));else{var a=s.default(h);setTimeout((function(){e(t,n,r,o,u,d,h+1)}),a)}})).catch((function(e){clearTimeout(_),d(e)}))}},{"./abort-controller":1,"./exponential_backoff_with_jitter":6,"./fetch":7,"./object_to_query_param_string":11,"./package_version":12}],17:[function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},r.apply(this,arguments)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=s(e("lodash/isPlainObject")),o=s(e("./deprecate")),a=s(e("./query")),l=e("./query_params"),c=s(e("./object_to_query_param_string")),u=s(e("./record")),d=s(e("./callback_to_promise")),h=function(){function e(e,t,n){if(!t&&!n)throw new Error("Table name or table ID is required");this._base=e,this.id=t,this.name=n,this.find=d.default(this._findRecordById,this),this.select=this._selectRecords.bind(this),this.create=d.default(this._createRecords,this),this.update=d.default(this._updateRecords.bind(this,!1),this),this.replace=d.default(this._updateRecords.bind(this,!0),this),this.destroy=d.default(this._destroyRecord,this),this.list=o.default(this._listRecords.bind(this),"table.list","Airtable: `list()` is deprecated. Use `select()` instead."),this.forEach=o.default(this._forEachRecord.bind(this),"table.forEach","Airtable: `forEach()` is deprecated. Use `select()` instead.")}return e.prototype._findRecordById=function(e,t){new u.default(this,e).fetch(t)},e.prototype._selectRecords=function(e){if(void 0===e&&(e={}),arguments.length>1&&console.warn("Airtable: `select` takes only one parameter, but it was given "+arguments.length+" parameters. Use `eachPage` or `firstPage` to fetch records."),i.default(e)){var t=a.default.validateParams(e);if(t.errors.length){var n=t.errors.map((function(e){return"  * "+e}));throw new Error("Airtable: invalid parameters for `select`:\n"+n.join("\n"))}return t.ignoredKeys.length&&console.warn("Airtable: the following parameters to `select` will be ignored: "+t.ignoredKeys.join(", ")),new a.default(this,t.validParams)}throw new Error("Airtable: the parameter for `select` should be a plain object or undefined.")},e.prototype._urlEncodedNameOrId=function(){return this.id||encodeURIComponent(this.name)},e.prototype._createRecords=function(e,t,n){var s,i=this,o=Array.isArray(e);n||(n=t,t={}),s=r(o?{records:e}:{fields:e},t),this._base.runAction("post","/"+this._urlEncodedNameOrId()+"/",{},s,(function(e,t,r){var s;e?n(e):(s=o?r.records.map((function(e){return new u.default(i,e.id,e)})):new u.default(i,r.id,r),n(null,s))}))},e.prototype._updateRecords=function(e,t,n,s,o){var a,l=this;if(Array.isArray(t)){var c=t;a=i.default(n)?n:{},o=s||n;var d=e?"put":"patch",h=r({records:c},a);this._base.runAction(d,"/"+this._urlEncodedNameOrId()+"/",{},h,(function(e,t,n){if(e)o(e);else{var r=n.records.map((function(e){return new u.default(l,e.id,e)}));o(null,r)}}))}else{var p=t,f=n;a=i.default(s)?s:{},o=o||s;var m=new u.default(this,p);e?m.putUpdate(f,a,o):m.patchUpdate(f,a,o)}},e.prototype._destroyRecord=function(e,t){var n=this;if(Array.isArray(e)){var r={records:e};this._base.runAction("delete","/"+this._urlEncodedNameOrId(),r,null,(function(e,r,s){if(e)t(e);else{var i=s.records.map((function(e){var t=e.id;return new u.default(n,t,null)}));t(null,i)}}))}else new u.default(this,e).destroy(t)},e.prototype._listRecords=function(e,t,n,s){var i=this;s||(s=n,n={});var o,a,d="/"+this._urlEncodedNameOrId()+"?"+c.default(n),h={},p=null;if("function"!=typeof n&&"post"===n.method||d.length>l.URL_CHARACTER_LENGTH_LIMIT){o="/"+this._urlEncodedNameOrId()+"/listRecords",p=r(r({},e&&{pageSize:e}),t&&{offset:t}),a="post";for(var f=0,m=Object.keys(n);f<m.length;f++){var g=m[f];l.shouldListRecordsParamBePassedAsParameter(g)?h[g]=n[g]:p[g]=n[g]}}else a="get",o="/"+this._urlEncodedNameOrId()+"/",h=r({limit:e,offset:t},n);this._base.runAction(a,o,h,p,(function(e,t,n){if(e)s(e);else{var r=n.records.map((function(e){return new u.default(i,null,e)}));s(null,r,n.offset)}}))},e.prototype._forEachRecord=function(t,n,r){var s=this;2===arguments.length&&(r=n,n=t,t={});var i=e.__recordsPerPageForIteration||100,o=null,a=function(){s._listRecords(i,o,t,(function(e,t,s){if(e)r(e);else{for(var i=0;i<t.length;i++)n(t[i]);s?(o=s,a()):r()}}))};a()},e}();t.exports=h},{"./callback_to_promise":4,"./deprecate":5,"./object_to_query_param_string":11,"./query":13,"./query_params":14,"./record":15,"lodash/isPlainObject":89}],18:[function(e,t,n){"use strict";function r(e,t){return function(n){return e(n)?{pass:!0}:{pass:!1,error:t}}}r.isOneOf=function(e){return e.includes.bind(e)},r.isArrayOf=function(e){return function(t){return Array.isArray(t)&&t.every(e)}},t.exports=r},{}],19:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t,n){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(r){var s=Object.getOwnPropertyDescriptor(r,t);return s.get?s.get.call(n):s.value}},c(e,t,n||e)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(){r(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return i(e,[{key:"addEventListener",value:function(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var n=this.listeners[e],r=0,s=n.length;r<s;r++)if(n[r]===t)return void n.splice(r,1)}},{key:"dispatchEvent",value:function(e){var t=this;if(e.type in this.listeners){for(var n=function(n){setTimeout((function(){return n.call(t,e)}))},r=this.listeners[e.type],s=0,i=r.length;s<i;s++)n(r[s]);return!e.defaultPrevented}}}]),e}(),d=function(e){function t(){var e;return r(this,t),(e=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?l(e):t}(this,o(t).call(this))).listeners||u.call(l(e)),Object.defineProperty(l(e),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(l(e),"onabort",{value:null,writable:!0,configurable:!0}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,e),i(t,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),c(o(t.prototype),"dispatchEvent",this).call(this,e)}}]),t}(u),h=function(){function e(){r(this,e),Object.defineProperty(this,"signal",{value:new d,writable:!0,configurable:!0})}return i(e,[{key:"abort",value:function(){var e;try{e=new Event("abort")}catch(t){"undefined"!=typeof document?document.createEvent?(e=document.createEvent("Event")).initEvent("abort",!1,!1):(e=document.createEventObject()).type="abort":e={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(e)}},{key:"toString",value:function(){return"[object AbortController]"}}]),e}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(h.prototype[Symbol.toStringTag]="AbortController",d.prototype[Symbol.toStringTag]="AbortSignal"),n.AbortController=h,n.AbortSignal=d,n.abortableFetch=function(e){"function"==typeof e&&(e={fetch:e});var t=e,n=t.fetch,r=t.Request,s=void 0===r?n.Request:r,i=t.AbortController,o=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,a=void 0!==o&&o;if(!function(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}({fetch:n,Request:s,AbortController:i,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:a}))return{fetch:n,Request:l};var l=s;(l&&!l.prototype.hasOwnProperty("signal")||a)&&((l=function(e,t){var n;t&&t.signal&&(n=t.signal,delete t.signal);var r=new s(e,t);return n&&Object.defineProperty(r,"signal",{writable:!1,enumerable:!1,configurable:!0,value:n}),r}).prototype=s.prototype);var c=n;return{fetch:function(e,t){var n=l&&l.prototype.isPrototypeOf(e)?e.signal:t?t.signal:void 0;if(n){var r;try{r=new DOMException("Aborted","AbortError")}catch(e){(r=new Error("Aborted")).name="AbortError"}if(n.aborted)return Promise.reject(r);var s=new Promise((function(e,t){n.addEventListener("abort",(function(){return t(r)}),{once:!0})}));return t&&t.signal&&delete t.signal,Promise.race([s,c(e,t)])}return c(e,t)},Request:l}}},{}],20:[function(e,t,n){},{}],21:[function(e,t,n){var r=e("./_hashClear"),s=e("./_hashDelete"),i=e("./_hashGet"),o=e("./_hashHas"),a=e("./_hashSet");function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=s,l.prototype.get=i,l.prototype.has=o,l.prototype.set=a,t.exports=l},{"./_hashClear":46,"./_hashDelete":47,"./_hashGet":48,"./_hashHas":49,"./_hashSet":50}],22:[function(e,t,n){var r=e("./_listCacheClear"),s=e("./_listCacheDelete"),i=e("./_listCacheGet"),o=e("./_listCacheHas"),a=e("./_listCacheSet");function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=s,l.prototype.get=i,l.prototype.has=o,l.prototype.set=a,t.exports=l},{"./_listCacheClear":56,"./_listCacheDelete":57,"./_listCacheGet":58,"./_listCacheHas":59,"./_listCacheSet":60}],23:[function(e,t,n){var r=e("./_getNative")(e("./_root"),"Map");t.exports=r},{"./_getNative":42,"./_root":72}],24:[function(e,t,n){var r=e("./_mapCacheClear"),s=e("./_mapCacheDelete"),i=e("./_mapCacheGet"),o=e("./_mapCacheHas"),a=e("./_mapCacheSet");function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=s,l.prototype.get=i,l.prototype.has=o,l.prototype.set=a,t.exports=l},{"./_mapCacheClear":61,"./_mapCacheDelete":62,"./_mapCacheGet":63,"./_mapCacheHas":64,"./_mapCacheSet":65}],25:[function(e,t,n){var r=e("./_root").Symbol;t.exports=r},{"./_root":72}],26:[function(e,t,n){var r=e("./_baseTimes"),s=e("./isArguments"),i=e("./isArray"),o=e("./isBuffer"),a=e("./_isIndex"),l=e("./isTypedArray"),c=Object.prototype.hasOwnProperty;t.exports=function(e,t){var n=i(e),u=!n&&s(e),d=!n&&!u&&o(e),h=!n&&!u&&!d&&l(e),p=n||u||d||h,f=p?r(e.length,String):[],m=f.length;for(var g in e)!t&&!c.call(e,g)||p&&("length"==g||d&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,m))||f.push(g);return f}},{"./_baseTimes":35,"./_isIndex":51,"./isArguments":78,"./isArray":79,"./isBuffer":82,"./isTypedArray":92}],27:[function(e,t,n){t.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,s=Array(r);++n<r;)s[n]=t(e[n],n,e);return s}},{}],28:[function(e,t,n){var r=e("./eq");t.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},{"./eq":76}],29:[function(e,t,n){var r=e("./_castPath"),s=e("./_toKey");t.exports=function(e,t){for(var n=0,i=(t=r(t,e)).length;null!=e&&n<i;)e=e[s(t[n++])];return n&&n==i?e:void 0}},{"./_castPath":38,"./_toKey":74}],30:[function(e,t,n){var r=e("./_Symbol"),s=e("./_getRawTag"),i=e("./_objectToString"),o=r?r.toStringTag:void 0;t.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?s(e):i(e)}},{"./_Symbol":25,"./_getRawTag":44,"./_objectToString":70}],31:[function(e,t,n){var r=e("./_baseGetTag"),s=e("./isObjectLike");t.exports=function(e){return s(e)&&"[object Arguments]"==r(e)}},{"./_baseGetTag":30,"./isObjectLike":88}],32:[function(e,t,n){var r=e("./isFunction"),s=e("./_isMasked"),i=e("./isObject"),o=e("./_toSource"),a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,h=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(e){return!(!i(e)||s(e))&&(r(e)?h:a).test(o(e))}},{"./_isMasked":54,"./_toSource":75,"./isFunction":83,"./isObject":87}],33:[function(e,t,n){var r=e("./_baseGetTag"),s=e("./isLength"),i=e("./isObjectLike"),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,t.exports=function(e){return i(e)&&s(e.length)&&!!o[r(e)]}},{"./_baseGetTag":30,"./isLength":84,"./isObjectLike":88}],34:[function(e,t,n){var r=e("./_isPrototype"),s=e("./_nativeKeys"),i=Object.prototype.hasOwnProperty;t.exports=function(e){if(!r(e))return s(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},{"./_isPrototype":55,"./_nativeKeys":68}],35:[function(e,t,n){t.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},{}],36:[function(e,t,n){var r=e("./_Symbol"),s=e("./_arrayMap"),i=e("./isArray"),o=e("./isSymbol"),a=r?r.prototype:void 0,l=a?a.toString:void 0;t.exports=function e(t){if("string"==typeof t)return t;if(i(t))return s(t,e)+"";if(o(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},{"./_Symbol":25,"./_arrayMap":27,"./isArray":79,"./isSymbol":91}],37:[function(e,t,n){t.exports=function(e){return function(t){return e(t)}}},{}],38:[function(e,t,n){var r=e("./isArray"),s=e("./_isKey"),i=e("./_stringToPath"),o=e("./toString");t.exports=function(e,t){return r(e)?e:s(e,t)?[e]:i(o(e))}},{"./_isKey":52,"./_stringToPath":73,"./isArray":79,"./toString":96}],39:[function(e,t,n){var r=e("./_root")["__core-js_shared__"];t.exports=r},{"./_root":72}],40:[function(e,t,r){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],41:[function(e,t,n){var r=e("./_isKeyable");t.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},{"./_isKeyable":53}],42:[function(e,t,n){var r=e("./_baseIsNative"),s=e("./_getValue");t.exports=function(e,t){var n=s(e,t);return r(n)?n:void 0}},{"./_baseIsNative":32,"./_getValue":45}],43:[function(e,t,n){var r=e("./_overArg")(Object.getPrototypeOf,Object);t.exports=r},{"./_overArg":71}],44:[function(e,t,n){var r=e("./_Symbol"),s=Object.prototype,i=s.hasOwnProperty,o=s.toString,a=r?r.toStringTag:void 0;t.exports=function(e){var t=i.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var s=o.call(e);return r&&(t?e[a]=n:delete e[a]),s}},{"./_Symbol":25}],45:[function(e,t,n){t.exports=function(e,t){return null==e?void 0:e[t]}},{}],46:[function(e,t,n){var r=e("./_nativeCreate");t.exports=function(){this.__data__=r?r(null):{},this.size=0}},{"./_nativeCreate":67}],47:[function(e,t,n){t.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},{}],48:[function(e,t,n){var r=e("./_nativeCreate"),s=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return s.call(t,e)?t[e]:void 0}},{"./_nativeCreate":67}],49:[function(e,t,n){var r=e("./_nativeCreate"),s=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:s.call(t,e)}},{"./_nativeCreate":67}],50:[function(e,t,n){var r=e("./_nativeCreate");t.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},{"./_nativeCreate":67}],51:[function(e,t,n){var r=/^(?:0|[1-9]\d*)$/;t.exports=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}},{}],52:[function(e,t,n){var r=e("./isArray"),s=e("./isSymbol"),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!s(e))||o.test(e)||!i.test(e)||null!=t&&e in Object(t)}},{"./isArray":79,"./isSymbol":91}],53:[function(e,t,n){t.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},{}],54:[function(e,t,n){var r,s=e("./_coreJsData"),i=(r=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(e){return!!i&&i in e}},{"./_coreJsData":39}],55:[function(e,t,n){var r=Object.prototype;t.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},{}],56:[function(e,t,n){t.exports=function(){this.__data__=[],this.size=0}},{}],57:[function(e,t,n){var r=e("./_assocIndexOf"),s=Array.prototype.splice;t.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():s.call(t,n,1),--this.size,0))}},{"./_assocIndexOf":28}],58:[function(e,t,n){var r=e("./_assocIndexOf");t.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},{"./_assocIndexOf":28}],59:[function(e,t,n){var r=e("./_assocIndexOf");t.exports=function(e){return r(this.__data__,e)>-1}},{"./_assocIndexOf":28}],60:[function(e,t,n){var r=e("./_assocIndexOf");t.exports=function(e,t){var n=this.__data__,s=r(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}},{"./_assocIndexOf":28}],61:[function(e,t,n){var r=e("./_Hash"),s=e("./_ListCache"),i=e("./_Map");t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||s),string:new r}}},{"./_Hash":21,"./_ListCache":22,"./_Map":23}],62:[function(e,t,n){var r=e("./_getMapData");t.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},{"./_getMapData":41}],63:[function(e,t,n){var r=e("./_getMapData");t.exports=function(e){return r(this,e).get(e)}},{"./_getMapData":41}],64:[function(e,t,n){var r=e("./_getMapData");t.exports=function(e){return r(this,e).has(e)}},{"./_getMapData":41}],65:[function(e,t,n){var r=e("./_getMapData");t.exports=function(e,t){var n=r(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}},{"./_getMapData":41}],66:[function(e,t,n){var r=e("./memoize");t.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},{"./memoize":94}],67:[function(e,t,n){var r=e("./_getNative")(Object,"create");t.exports=r},{"./_getNative":42}],68:[function(e,t,n){var r=e("./_overArg")(Object.keys,Object);t.exports=r},{"./_overArg":71}],69:[function(e,t,n){var r=e("./_freeGlobal"),s="object"==typeof n&&n&&!n.nodeType&&n,i=s&&"object"==typeof t&&t&&!t.nodeType&&t,o=i&&i.exports===s&&r.process,a=function(){try{return i&&i.require&&i.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();t.exports=a},{"./_freeGlobal":40}],70:[function(e,t,n){var r=Object.prototype.toString;t.exports=function(e){return r.call(e)}},{}],71:[function(e,t,n){t.exports=function(e,t){return function(n){return e(t(n))}}},{}],72:[function(e,t,n){var r=e("./_freeGlobal"),s="object"==typeof self&&self&&self.Object===Object&&self,i=r||s||Function("return this")();t.exports=i},{"./_freeGlobal":40}],73:[function(e,t,n){var r=e("./_memoizeCapped"),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,o=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(s,(function(e,n,r,s){t.push(r?s.replace(i,"$1"):n||e)})),t}));t.exports=o},{"./_memoizeCapped":66}],74:[function(e,t,n){var r=e("./isSymbol");t.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},{"./isSymbol":91}],75:[function(e,t,n){var r=Function.prototype.toString;t.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},{}],76:[function(e,t,n){t.exports=function(e,t){return e===t||e!=e&&t!=t}},{}],77:[function(e,t,n){var r=e("./_baseGet");t.exports=function(e,t,n){var s=null==e?void 0:r(e,t);return void 0===s?n:s}},{"./_baseGet":29}],78:[function(e,t,n){var r=e("./_baseIsArguments"),s=e("./isObjectLike"),i=Object.prototype,o=i.hasOwnProperty,a=i.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return s(e)&&o.call(e,"callee")&&!a.call(e,"callee")};t.exports=l},{"./_baseIsArguments":31,"./isObjectLike":88}],79:[function(e,t,n){var r=Array.isArray;t.exports=r},{}],80:[function(e,t,n){var r=e("./isFunction"),s=e("./isLength");t.exports=function(e){return null!=e&&s(e.length)&&!r(e)}},{"./isFunction":83,"./isLength":84}],81:[function(e,t,n){var r=e("./_baseGetTag"),s=e("./isObjectLike");t.exports=function(e){return!0===e||!1===e||s(e)&&"[object Boolean]"==r(e)}},{"./_baseGetTag":30,"./isObjectLike":88}],82:[function(e,t,n){var r=e("./_root"),s=e("./stubFalse"),i="object"==typeof n&&n&&!n.nodeType&&n,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i?r.Buffer:void 0,l=(a?a.isBuffer:void 0)||s;t.exports=l},{"./_root":72,"./stubFalse":95}],83:[function(e,t,n){var r=e("./_baseGetTag"),s=e("./isObject");t.exports=function(e){if(!s(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},{"./_baseGetTag":30,"./isObject":87}],84:[function(e,t,n){t.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},{}],85:[function(e,t,n){t.exports=function(e){return null==e}},{}],86:[function(e,t,n){var r=e("./_baseGetTag"),s=e("./isObjectLike");t.exports=function(e){return"number"==typeof e||s(e)&&"[object Number]"==r(e)}},{"./_baseGetTag":30,"./isObjectLike":88}],87:[function(e,t,n){t.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},{}],88:[function(e,t,n){t.exports=function(e){return null!=e&&"object"==typeof e}},{}],89:[function(e,t,n){var r=e("./_baseGetTag"),s=e("./_getPrototype"),i=e("./isObjectLike"),o=Function.prototype,a=Object.prototype,l=o.toString,c=a.hasOwnProperty,u=l.call(Object);t.exports=function(e){if(!i(e)||"[object Object]"!=r(e))return!1;var t=s(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}},{"./_baseGetTag":30,"./_getPrototype":43,"./isObjectLike":88}],90:[function(e,t,n){var r=e("./_baseGetTag"),s=e("./isArray"),i=e("./isObjectLike");t.exports=function(e){return"string"==typeof e||!s(e)&&i(e)&&"[object String]"==r(e)}},{"./_baseGetTag":30,"./isArray":79,"./isObjectLike":88}],91:[function(e,t,n){var r=e("./_baseGetTag"),s=e("./isObjectLike");t.exports=function(e){return"symbol"==typeof e||s(e)&&"[object Symbol]"==r(e)}},{"./_baseGetTag":30,"./isObjectLike":88}],92:[function(e,t,n){var r=e("./_baseIsTypedArray"),s=e("./_baseUnary"),i=e("./_nodeUtil"),o=i&&i.isTypedArray,a=o?s(o):r;t.exports=a},{"./_baseIsTypedArray":33,"./_baseUnary":37,"./_nodeUtil":69}],93:[function(e,t,n){var r=e("./_arrayLikeKeys"),s=e("./_baseKeys"),i=e("./isArrayLike");t.exports=function(e){return i(e)?r(e):s(e)}},{"./_arrayLikeKeys":26,"./_baseKeys":34,"./isArrayLike":80}],94:[function(e,t,n){var r=e("./_MapCache");function s(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,s=t?t.apply(this,r):r[0],i=n.cache;if(i.has(s))return i.get(s);var o=e.apply(this,r);return n.cache=i.set(s,o)||i,o};return n.cache=new(s.Cache||r),n}s.Cache=r,t.exports=s},{"./_MapCache":24}],95:[function(e,t,n){t.exports=function(){return!1}},{}],96:[function(e,t,n){var r=e("./_baseToString");t.exports=function(e){return null==e?"":r(e)}},{"./_baseToString":36}],airtable:[function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=r(e("./base")),i=r(e("./record")),o=r(e("./table")),a=r(e("./airtable_error")),l=function(){function e(t){void 0===t&&(t={});var n=e.default_config(),r=t.apiVersion||e.apiVersion||n.apiVersion;if(Object.defineProperties(this,{_apiKey:{value:t.apiKey||e.apiKey||n.apiKey},_apiVersion:{value:r},_apiVersionMajor:{value:r.split(".")[0]},_customHeaders:{value:t.customHeaders||{}},_endpointUrl:{value:t.endpointUrl||e.endpointUrl||n.endpointUrl},_noRetryIfRateLimited:{value:t.noRetryIfRateLimited||e.noRetryIfRateLimited||n.noRetryIfRateLimited},_requestTimeout:{value:t.requestTimeout||e.requestTimeout||n.requestTimeout}}),!this._apiKey)throw new Error("An API key is required to connect to Airtable")}return e.prototype.base=function(e){return s.default.createFunctor(this,e)},e.default_config=function(){return{endpointUrl:"https://api.airtable.com",apiVersion:"0.1.0",apiKey:"",noRetryIfRateLimited:!1,requestTimeout:3e5}},e.configure=function(t){var n=t.apiKey,r=t.endpointUrl,s=t.apiVersion,i=t.noRetryIfRateLimited,o=t.requestTimeout;e.apiKey=n,e.endpointUrl=r,e.apiVersion=s,e.noRetryIfRateLimited=i,e.requestTimeout=o},e.base=function(t){return(new e).base(t)},e.Base=s.default,e.Record=i.default,e.Table=o.default,e.Error=a.default,e}();t.exports=l},{"./airtable_error":2,"./base":3,"./record":15,"./table":17}]},{},["airtable"])("airtable")}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=(e,t,n)=>{const r=n.currentTarget;return"true"===r.dataset.timeToValidate?(r.dispatchEvent(new Event("form-ended")),-1):++e>=t?t:e},t=(e,t,n)=>(--e<1&&(e=1),e),r=(()=>{class e extends HTMLElement{constructor({activeSegmentClass:e,validSegmentClass:t,invalidSegmentClass:n,segmentClass:r,onSegmentClick:s,getSegmentCount:i}){super(),this._activeSegmentClass=e,this._validSegmentClass=t,this._invalidSegmentClass=n,this._segmentClass=r,this._onSegmentClick=s,this._getSegmentCount=i,this._activeSegmentRef=null}render(){this.style.maxWidth="100%",this.style.display="flex",this.style.flexDirection="row",this.style.gap="1rem";const e=parseInt(this._getSegmentCount()||0);for(let t=0;t<e;t++){const e=this.createSegment();this.appendChild(e)}this.selectSegment(0)}createSegment(){const e=document.createElement("span");return e.classList.add(this._segmentClass),e.classList.add(this._invalidSegmentClass),this._onSegmentClick&&e.addEventListener("click",this._onSegmentClick),e}selectSegment(e){this._activeSegmentRef&&this._activeSegmentRef.classList.remove(this._activeSegmentClass);const t=this.children.item(e);t.classList.add(this._activeSegmentClass),this._activeSegmentRef=t}setValidSegment(e){this.children.item(e).classList.remove(this._invalidSegmentClass),this.children.item(e).classList.add(this._validSegmentClass)}setInvalidSegment(e){this.children.item(e).classList.remove(this._validSegmentClass),this.children.item(e).classList.add(this._invalidSegmentClass)}insertSegmentAt(e){let t=e-1;t<0&&(t=0),this.children.item(t).after(this.createSegment())}deleteSegmentAt(e){this.children.item(e).remove()}connectedCallback(){this.render()}}customElements.define("progress-bar",e);let t=null;return{init:n=>{t=new e(n),document.getElementById(n.container).appendChild(t)},deleteSegmentAt:e=>{t.deleteSegmentAt(e)},createSegmentAt:e=>{t.insertSegmentAt(e)},selectSegment:e=>{t.selectSegment(e)},segmentIsValid:e=>{t.setValidSegment(e)},segmentIsNotValid:e=>{t.setInvalidSegment(e)}}})(),s=r,i=(()=>{let e;return{init:t=>{e=t},save:(t,n)=>{if(!e)throw new Error("Store must be initialized before first use.");localStorage.setItem(e+t,n)},get:t=>{if(!e)throw new Error("Store must be initialized before first use.");return localStorage.getItem(e+t)},clear:()=>{if(!e)throw new Error("Store must be initialized before first use.");const t=Object.keys(localStorage);for(const n of t)n.startsWith(e)&&localStorage.removeItem(n)},getContractName:()=>e}})(),o=e=>null==e.value?e.getAttribute("value"):e.value,a=e=>{const t=document.getElementById(`page_${e}`).querySelectorAll('[data-validate="true"]');let n=JSON.parse(i.get("report"))||[];for(const r of t){const t=o(r);if(null==t||""==t||"none"==t)return n.includes(e)||n.push(e),i.save("report",JSON.stringify(n)),!1}const r=n.indexOf(e);return-1!=r&&(n.splice(r,1),i.save("report",JSON.stringify(n))),!0},l=e=>{const t=document.getElementById("next_button");return n=>{let r=d(),i=h();c(r),a(r)?s.segmentIsValid(r-1):s.segmentIsNotValid(r-1);const o=e(r,i,n);o<0||(o===i?(t.querySelector("span").innerText="VALIDER LE CONTRAT",t.setAttribute("data-time-to-validate",!0)):(t.querySelector("span").innerText="SUIVANT",t.setAttribute("data-time-to-validate",!1)),s.selectSegment(o-1),u(o))}},c=e=>{document.getElementById(`page_${e}`).hidden=!0},u=e=>{const t=document.getElementById(`page_${e}`);t.hidden=!1,document.getElementById("page_number").setAttribute("value",e),document.getElementById("page-title").innerText=t.getAttribute("data-page-title")},d=()=>{const e=document.getElementById("page_number");return parseInt(e.value)},h=()=>{const e=document.getElementById("page_number_total");return parseInt(e.value)},p=(e,t)=>(null==t?e:`${e.trim()}_${t}`).trim(),f=(e,t)=>{var n=[];let r=t.exec(e);for(;null!==r;)r.index===t.lastIndex&&t.lastIndex++,r.forEach((e=>{n.push(e)})),r=t.exec(e);return n},m=/{{#for\s{1}(.*)}}/g,g=(e,t,n,r)=>{const s=f(t,m);if(!s||2!=s.length)return console.error("can't get for tag whereas is should be present."),{};const i=s[0],a=s[1],l=crypto.randomUUID(),c=p(`div_${a}_${l}`,r),u=n+1;let d=u;const h=[];for(;!e[d].includes("{{/for}}")||d===e.length;)h.push(e[d]),d++;const g=document.getElementById(a);g.addEventListener("input",(()=>{const e=o(g),t=document.getElementById(c);let n=t.childElementCount-parseInt(e);for(;n>0;)t.removeChild(t.lastChild),n--;let r=t.childElementCount>0?t.childElementCount:0;for(;r<e;r++){const e=S(h.slice(),r),n=document.createElement("div");n.innerHTML=e.join(""),t.appendChild(n)}}));const b=t.replace(i,`<div id=${c}>`);return e[n]=b,e.splice(u,h.length),{newTextLines:e,newIndex:u-1}},b=/{{#if\s{1}(.*)}}/g,_=/^(eq|neq)\s+(.*)\s+"([^"]+)"$/gm,v="&",y=(e,t)=>{const n=f(e,b);if(!n||2!=n.length)return console.error("no match found for line",e),"";const r=f(n[1],_);if(!r||4!=r.length)return console.error("can't get condition parameters for",n[1],"b"),"";const s=r[1],i=p(r[2],t),o=r[3];let a="none",l=[];o.includes("|")?(l=o.split("|"),a="|"):o.includes(v)?(l=o.split(v),a=v):l=[o];const c=crypto.randomUUID(),u=p(`div_${c}_${i}`,t),d=document.getElementById(i);return d.addEventListener("input",(()=>{w(d,u,l,s,a)})),e.replace(b,(e=>`<div id="${u}" style="display:none;">`))},w=(e,t,n,r,s)=>{const i=document.getElementById(t),a=o(e);k(i,a,n,r),s===v&&x(i,a,n,r)},k=(e,t,n,r)=>{for(let s=0;s<n.length;s++){const i=n[s];if(E(t,i,r))return void(e.style.display="block")}e.style.display="none"},x=(e,t,n,r)=>{for(let s=0;s<n.length;s++){const i=n[s];if(!E(t,i,r))return void(e.style.display="none")}e.style.display="block"},E=(e,t,n)=>{switch(n){case"eq":return e==t;case"neq":return e!=t}},C=/{{#array\s{1}(.*)}}/g,A=(e,t)=>{const n=f(e,C);if(!n||2!=n.length)return console.error("can't get array tag whereas is should be present."),{};const r=p(n[1],t),s=document.getElementById(r);s.addEventListener("newRow",(()=>{I(s,r,t)})),s.addEventListener("rowDeleted",(()=>{I(s,r,t)}));const i=s.totalInputRef;return i.addEventListener("input",(()=>{const e=document.getElementById(`preview_${i.id}`);null!=e.firstChild&&e.removeChild(e.firstChild);const t=document.createElement("p");t.innerText=`Total: ${o(i)}`,e.appendChild(t)})),`<div id="div_${r}"><table id="table_${r}"></table><div id="preview_${i.id}"></div></div>`},I=(e,t,n)=>{const r=document.getElementById(`div_${t}`),s=document.getElementById(`table_${t}`),i=document.createElement("table");i.id=`table_${t}`,r.replaceChild(i,s);const o=document.createElement("thead"),a=document.createElement("tr");i.appendChild(o),o.appendChild(a),e.columns.forEach((e=>{const t=document.createElement("th"),n=document.createElement("p"),r=document.createElement("strong");r.innerText=e.label,n.appendChild(r),t.appendChild(n),a.appendChild(t)}));const l=document.createElement("tbody");e.activeRows.forEach((e=>{const t=document.createElement("tr");e.forEach((e=>{const n=document.createElement("td"),r=document.getElementById(e);r.addEventListener("input",(()=>{T(n,r)})),T(n,r),t.appendChild(n)})),l.appendChild(t)})),i.appendChild(l)},T=(e,t)=>{const n=document.createElement("p");n.innerText=o(t),null!=e.firstChild?e.replaceChild(n,e.firstChild):e.appendChild(n)},R=(e,t)=>{const n=parseInt(794/t);return parseInt(e/n)},L=/{{(?![#\/])([^{}]+)}}/g,S=(e,t)=>{for(let n=0;n<e.length;n++){const r=e[n];let s="";if(r.includes("{{#if")){if(s=y(r,t),""===s){console.error("Error occured during conditionnal tag replacement.");continue}e[n]=s}else if(r.includes("{{/if}}"))s="</div>",e[n]=s;else if(r.includes("{{#for")){const{newTextLines:s,newIndex:i}=g(e.slice(),r,n,t);e=s,n=i}else if(r.includes("{{/for}}"))s="</div>",e[n]=s;else if(r.includes("{{#array"))s=A(r,t),e[n]=s;else if(r.includes("{{#today}}")){const t=new Date;s=r.replace("{{#today}}",t.toLocaleDateString()),e[n]=s}else s=r.replace(L,((e,n)=>{const r=p(n,t);let s=`span_${r}_${crypto.randomUUID()}`;const i=document.getElementById(r),a=()=>{const e=document.getElementById(s),t=o(i);if("date"===i.type){const n=new Date(t);n||(e.innerText=t),e.innerText=n.toLocaleDateString()}else e.innerText=t;""===t?e.classList.add("to_fill"):e.classList.remove("to_fill")};let l;try{l=o(i)||""}catch(e){l=""}return i.addEventListener("input",a),i.addEventListener("change",a),`<span id="${s}">${l}</span>`})),e[n]=s}return e},O=(e,t)=>{const n=document.createElement("div");return n.id=`container_${e}`,null!=t&&n.classList.add(...t),n},j=(e,t,n,r,s)=>{var i=document.createElement("input");return i.type=e,i.name=t,i.id=n,i.value=r,"radio"!==e&&i.classList.add("form-input"),void 0===s||(null!=s.min&&(i.addEventListener("change",$(s.min)),i.setAttribute("min",s.min)),null!=s.max&&(i.addEventListener("change",N(s.max)),i.max=s.max),null!=s.case&&i.addEventListener("change",P(s.case)),null!=s.number_format&&i.addEventListener("change",M(s.number_format))),i},$=e=>t=>{const n=t.target;parseInt(n.value)<e&&(n.value=e)},N=e=>t=>{const n=t.target;parseInt(n.value)>e&&(n.value=e)},P=e=>{switch(e){case"Uppercase":return e=>{const t=e.target;t.value=t.value.toUpperCase()};case"FirstLetterUppercase":return e=>{const t=e.target;t.value=t.value?t.value[0].toUpperCase()+t.value.slice(1):""};default:return()=>{}}},M=e=>{switch(e){case"decimal":return e=>{const t=e.target,n=parseFloat(t.value);n&&(t.value=n),t.dispatchEvent(new Event("input"))};case"integer":return e=>{const t=e.target,n=parseInt(t.value);n&&(t.value=n),t.dispatchEvent(new Event("input"))};default:return}};let B={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function z(e){B=e}const D=/[&<>"']/,U=new RegExp(D.source,"g"),q=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,F=new RegExp(q.source,"g"),H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},V=e=>H[e];function G(e,t){if(t){if(D.test(e))return e.replace(U,V)}else if(q.test(e))return e.replace(F,V);return e}const J=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function K(e){return e.replace(J,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const Z=/(^|[^\[])\^/g;function Q(e,t){let n="string"==typeof e?e:e.source;t=t||"";const r={replace:(e,t)=>{let s="string"==typeof t?t:t.source;return s=s.replace(Z,"$1"),n=n.replace(e,s),r},getRegex:()=>new RegExp(n,t)};return r}function Y(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch(e){return null}return e}const X={exec:()=>null};function W(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let r=!1,s=t;for(;--s>=0&&"\\"===n[s];)r=!r;return r?"|":" |"})).split(/ \|/);let r=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function ee(e,t,n){const r=e.length;if(0===r)return"";let s=0;for(;s<r;){const i=e.charAt(r-s-1);if(i!==t||n){if(i===t||!n)break;s++}else s++}return e.slice(0,r-s)}function te(e,t,n,r){const s=t.href,i=t.title?G(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){r.state.inLink=!0;const e={type:"link",raw:n,href:s,title:i,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,e}return{type:"image",raw:n,href:s,title:i,text:G(o)}}class ne{options;rules;lexer;constructor(e){this.options=e||B}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:ee(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=function(e,t){const n=e.match(/^(\s+)(?:```)/);if(null===n)return t;const r=n[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[n]=t;return n.length>=r.length?e.slice(r.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=ee(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const e=ee(t[0].replace(/^ *>[ \t]?/gm,""),"\n"),n=this.lexer.state.top;this.lexer.state.top=!0;const r=this.lexer.blockTokens(e);return this.lexer.state.top=n,{type:"blockquote",raw:t[0],tokens:r,text:e}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const r=n.length>1,s={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const i=new RegExp(`^( {0,3}${n})((?:[\t ][^\\n]*)?(?:\\n|$))`);let o="",a="",l=!1;for(;e;){let n=!1;if(!(t=i.exec(e)))break;if(this.rules.block.hr.test(e))break;o=t[0],e=e.substring(o.length);let r=t[2].split("\n",1)[0].replace(/^\t+/,(e=>" ".repeat(3*e.length))),c=e.split("\n",1)[0],u=0;this.options.pedantic?(u=2,a=r.trimStart()):(u=t[2].search(/[^ ]/),u=u>4?1:u,a=r.slice(u),u+=t[1].length);let d=!1;if(!r&&/^ *$/.test(c)&&(o+=c+"\n",e=e.substring(c.length+1),n=!0),!n){const t=new RegExp(`^ {0,${Math.min(3,u-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),n=new RegExp(`^ {0,${Math.min(3,u-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),s=new RegExp(`^ {0,${Math.min(3,u-1)}}(?:\`\`\`|~~~)`),i=new RegExp(`^ {0,${Math.min(3,u-1)}}#`);for(;e;){const l=e.split("\n",1)[0];if(c=l,this.options.pedantic&&(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),s.test(c))break;if(i.test(c))break;if(t.test(c))break;if(n.test(e))break;if(c.search(/[^ ]/)>=u||!c.trim())a+="\n"+c.slice(u);else{if(d)break;if(r.search(/[^ ]/)>=4)break;if(s.test(r))break;if(i.test(r))break;if(n.test(r))break;a+="\n"+c}d||c.trim()||(d=!0),o+=l+"\n",e=e.substring(l.length+1),r=c.slice(u)}}s.loose||(l?s.loose=!0:/\n *\n *$/.test(o)&&(l=!0));let h,p=null;this.options.gfm&&(p=/^\[[ xX]\] /.exec(a),p&&(h="[ ] "!==p[0],a=a.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:o,task:!!p,checked:h,loose:!1,text:a,tokens:[]}),s.raw+=o}s.items[s.items.length-1].raw=o.trimEnd(),s.items[s.items.length-1].text=a.trimEnd(),s.raw=s.raw.trimEnd();for(let e=0;e<s.items.length;e++)if(this.lexer.state.top=!1,s.items[e].tokens=this.lexer.blockTokens(s.items[e].text,[]),!s.loose){const t=s.items[e].tokens.filter((e=>"space"===e.type)),n=t.length>0&&t.some((e=>/\n.*\n/.test(e.raw)));s.loose=n}if(s.loose)for(let e=0;e<s.items.length;e++)s.items[e].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const e=t[1].toLowerCase().replace(/\s+/g," "),n=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:n,title:r}}}table(e){const t=this.rules.block.table.exec(e);if(!t)return;if(!/[:|]/.test(t[2]))return;const n=W(t[1]),r=t[2].replace(/^\||\| *$/g,"").split("|"),s=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[],i={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const e of r)/^ *-+: *$/.test(e)?i.align.push("right"):/^ *:-+: *$/.test(e)?i.align.push("center"):/^ *:-+ *$/.test(e)?i.align.push("left"):i.align.push(null);for(const e of n)i.header.push({text:e,tokens:this.lexer.inline(e)});for(const e of s)i.rows.push(W(e,i.header.length).map((e=>({text:e,tokens:this.lexer.inline(e)}))));return i}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:G(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=ee(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let n=0;for(let r=0;r<e.length;r++)if("\\"===e[r])r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return-1}(t[2],"()");if(e>-1){const n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],r="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),te(t,{href:n?n.replace(this.rules.inline.anyPunctuation,"$1"):n,title:r?r.replace(this.rules.inline.anyPunctuation,"$1"):r},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const e=t[(n[2]||n[1]).replace(/\s+/g," ").toLowerCase()];if(!e){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return te(n,e,n[0],this.lexer)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(r&&(!r[3]||!n.match(/[\p{L}\p{N}]/u))&&(!r[1]&&!r[2]||!n||this.rules.inline.punctuation.exec(n))){const n=[...r[0]].length-1;let s,i,o=n,a=0;const l="*"===r[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+n);null!=(r=l.exec(t));){if(s=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!s)continue;if(i=[...s].length,r[3]||r[4]){o+=i;continue}if((r[5]||r[6])&&n%3&&!((n+i)%3)){a+=i;continue}if(o-=i,o>0)continue;i=Math.min(i,i+o+a);const t=[...r[0]][0].length,l=e.slice(0,n+r.index+t+i);if(Math.min(n,i)%2){const e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}const c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e),r=/^ /.test(e)&&/ $/.test(e);return n&&r&&(e=e.substring(1,e.length-1)),e=G(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let e,n;return"@"===t[2]?(e=G(t[1]),n="mailto:"+e):(e=G(t[1]),n=e),{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,n;if("@"===t[2])e=G(t[0]),n="mailto:"+e;else{let r;do{r=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??""}while(r!==t[0]);e=G(t[0]),n="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let e;return e=this.lexer.state.inRawBlock?t[0]:G(t[0]),{type:"text",raw:t[0],text:e}}}}const re=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,se=/(?:[*+-]|\d{1,9}[.)])/,ie=Q(/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,se).getRegex(),oe=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,ae=/(?!\s*\])(?:\\.|[^\[\]\\])+/,le=Q(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",ae).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),ce=Q(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,se).getRegex(),ue="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",de=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,he=Q("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",de).replace("tag",ue).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),pe=Q(oe).replace("hr",re).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ue).getRegex(),fe={blockquote:Q(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",pe).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:le,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:re,html:he,lheading:ie,list:ce,newline:/^(?: *(?:\n|$))+/,paragraph:pe,table:X,text:/^[^\n]+/},me=Q("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",re).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ue).getRegex(),ge={...fe,table:me,paragraph:Q(oe).replace("hr",re).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",me).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ue).getRegex()},be={...fe,html:Q("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",de).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:X,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Q(oe).replace("hr",re).replace("heading"," *#{1,6} *[^\n]").replace("lheading",ie).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},_e=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,ve=/^( {2,}|\\)\n(?!\s*$)/,ye="\\p{P}\\p{S}",we=Q(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,ye).getRegex(),ke=Q(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,ye).getRegex(),xe=Q("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,ye).getRegex(),Ee=Q("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,ye).getRegex(),Ce=Q(/\\([punct])/,"gu").replace(/punct/g,ye).getRegex(),Ae=Q(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Ie=Q(de).replace("(?:--\x3e|$)","--\x3e").getRegex(),Te=Q("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Ie).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Re=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Le=Q(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Re).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Se=Q(/^!?\[(label)\]\[(ref)\]/).replace("label",Re).replace("ref",ae).getRegex(),Oe=Q(/^!?\[(ref)\](?:\[\])?/).replace("ref",ae).getRegex(),je={_backpedal:X,anyPunctuation:Ce,autolink:Ae,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:ve,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:X,emStrongLDelim:ke,emStrongRDelimAst:xe,emStrongRDelimUnd:Ee,escape:_e,link:Le,nolink:Oe,punctuation:we,reflink:Se,reflinkSearch:Q("reflink|nolink(?!\\()","g").replace("reflink",Se).replace("nolink",Oe).getRegex(),tag:Te,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:X},$e={...je,link:Q(/^!?\[(label)\]\((.*?)\)/).replace("label",Re).getRegex(),reflink:Q(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Re).getRegex()},Ne={...je,escape:Q(_e).replace("])","~|])").getRegex(),url:Q(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Pe={...Ne,br:Q(ve).replace("{2,}","*").getRegex(),text:Q(Ne.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Me={normal:fe,gfm:ge,pedantic:be},Be={normal:je,gfm:Ne,breaks:Pe,pedantic:$e};class ze{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||B,this.options.tokenizer=this.options.tokenizer||new ne,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Me.normal,inline:Be.normal};this.options.pedantic?(t.block=Me.pedantic,t.inline=Be.pedantic):this.options.gfm&&(t.block=Me.gfm,this.options.breaks?t.inline=Be.breaks:t.inline=Be.gfm),this.tokenizer.rules=t}static get rules(){return{block:Me,inline:Be}}static lex(e,t){return new ze(t).lex(e)}static lexInline(e,t){return new ze(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){const t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[]){let n,r,s,i;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,((e,t,n)=>t+"    ".repeat(n.length)));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),1===n.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?t.push(n):(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.list(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.def(e))e=e.substring(n.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(r.raw+="\n"+n.raw,r.text+="\n"+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else{if(s=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startBlock.forEach((e=>{r=e.call({lexer:this},n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(s=e.substring(0,t+1))}if(this.state.top&&(n=this.tokenizer.paragraph(s)))r=t[t.length-1],i&&"paragraph"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n),i=s.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,r,s,i,o,a,l=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(i=this.tokenizer.rules.inline.reflinkSearch.exec(l));)e.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(i=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(i=this.tokenizer.rules.inline.anyPunctuation.exec(l));)l=l.slice(0,i.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(o||(a=""),o=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,l,a))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e))){if(s=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startInline.forEach((e=>{r=e.call({lexer:this},n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(s=e.substring(0,t+1))}if(n=this.tokenizer.inlineText(s))e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(a=n.raw.slice(-1)),o=!0,r=t[t.length-1],r&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(n.raw.length),t.push(n);return t}}class De{options;constructor(e){this.options=e||B}code(e,t,n){const r=(t||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="language-'+G(r)+'">'+(n?e:G(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:G(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e,t){return e}heading(e,t,n){return`<h${t}>${e}</h${t}>\n`}hr(){return"<hr>\n"}list(e,t,n){const r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e,t,n){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>\n`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,n){const r=Y(e);if(null===r)return n;let s='<a href="'+(e=r)+'"';return t&&(s+=' title="'+t+'"'),s+=">"+n+"</a>",s}image(e,t,n){const r=Y(e);if(null===r)return n;let s=`<img src="${e=r}" alt="${n}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return e}}class Ue{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}}class qe{options;renderer;textRenderer;constructor(e){this.options=e||B,this.options.renderer=this.options.renderer||new De,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Ue}static parse(e,t){return new qe(t).parse(e)}static parseInline(e,t){return new qe(t).parseInline(e)}parse(e,t=!0){let n="";for(let r=0;r<e.length;r++){const s=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const e=s,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){n+=t||"";continue}}switch(s.type){case"space":continue;case"hr":n+=this.renderer.hr();continue;case"heading":{const e=s;n+=this.renderer.heading(this.parseInline(e.tokens),e.depth,K(this.parseInline(e.tokens,this.textRenderer)));continue}case"code":{const e=s;n+=this.renderer.code(e.text,e.lang,!!e.escaped);continue}case"table":{const e=s;let t="",r="";for(let t=0;t<e.header.length;t++)r+=this.renderer.tablecell(this.parseInline(e.header[t].tokens),{header:!0,align:e.align[t]});t+=this.renderer.tablerow(r);let i="";for(let t=0;t<e.rows.length;t++){const n=e.rows[t];r="";for(let t=0;t<n.length;t++)r+=this.renderer.tablecell(this.parseInline(n[t].tokens),{header:!1,align:e.align[t]});i+=this.renderer.tablerow(r)}n+=this.renderer.table(t,i);continue}case"blockquote":{const e=s,t=this.parse(e.tokens);n+=this.renderer.blockquote(t);continue}case"list":{const e=s,t=e.ordered,r=e.start,i=e.loose;let o="";for(let t=0;t<e.items.length;t++){const n=e.items[t],r=n.checked,s=n.task;let a="";if(n.task){const e=this.renderer.checkbox(!!r);i?n.tokens.length>0&&"paragraph"===n.tokens[0].type?(n.tokens[0].text=e+" "+n.tokens[0].text,n.tokens[0].tokens&&n.tokens[0].tokens.length>0&&"text"===n.tokens[0].tokens[0].type&&(n.tokens[0].tokens[0].text=e+" "+n.tokens[0].tokens[0].text)):n.tokens.unshift({type:"text",text:e+" "}):a+=e+" "}a+=this.parse(n.tokens,i),o+=this.renderer.listitem(a,s,!!r)}n+=this.renderer.list(o,t,r);continue}case"html":{const e=s;n+=this.renderer.html(e.text,e.block);continue}case"paragraph":{const e=s;n+=this.renderer.paragraph(this.parseInline(e.tokens));continue}case"text":{let i=s,o=i.tokens?this.parseInline(i.tokens):i.text;for(;r+1<e.length&&"text"===e[r+1].type;)i=e[++r],o+="\n"+(i.tokens?this.parseInline(i.tokens):i.text);n+=t?this.renderer.paragraph(o):o;continue}default:{const e='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let r=0;r<e.length;r++){const s=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const e=this.options.extensions.renderers[s.type].call({parser:this},s);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){n+=e||"";continue}}switch(s.type){case"escape":{const e=s;n+=t.text(e.text);break}case"html":{const e=s;n+=t.html(e.text);break}case"link":{const e=s;n+=t.link(e.href,e.title,this.parseInline(e.tokens,t));break}case"image":{const e=s;n+=t.image(e.href,e.title,e.text);break}case"strong":{const e=s;n+=t.strong(this.parseInline(e.tokens,t));break}case"em":{const e=s;n+=t.em(this.parseInline(e.tokens,t));break}case"codespan":{const e=s;n+=t.codespan(e.text);break}case"br":n+=t.br();break;case"del":{const e=s;n+=t.del(this.parseInline(e.tokens,t));break}case"text":{const e=s;n+=t.text(e.text);break}default:{const e='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}}class Fe{options;constructor(e){this.options=e||B}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}const He=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#e(ze.lex,qe.parse);parseInline=this.#e(ze.lexInline,qe.parseInline);Parser=qe;Renderer=De;TextRenderer=Ue;Lexer=ze;Tokenizer=ne;Hooks=Fe;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(const r of e)switch(n=n.concat(t.call(this,r)),r.type){case"table":{const e=r;for(const r of e.header)n=n.concat(this.walkTokens(r.tokens,t));for(const r of e.rows)for(const e of r)n=n.concat(this.walkTokens(e.tokens,t));break}case"list":{const e=r;n=n.concat(this.walkTokens(e.items,t));break}default:{const e=r;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach((r=>{const s=e[r].flat(1/0);n=n.concat(this.walkTokens(s,t))})):e.tokens&&(n=n.concat(this.walkTokens(e.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach((e=>{const n={...e};if(n.async=this.defaults.async||n.async||!1,e.extensions&&(e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){const n=t.renderers[e.name];t.renderers[e.name]=n?function(...t){let r=e.renderer.apply(this,t);return!1===r&&(r=n.apply(this,t)),r}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");const n=t[e.level];n?n.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)})),n.extensions=t),e.renderer){const t=this.defaults.renderer||new De(this.defaults);for(const n in e.renderer){if(!(n in t))throw new Error(`renderer '${n}' does not exist`);if("options"===n)continue;const r=n,s=e.renderer[r],i=t[r];t[r]=(...e)=>{let n=s.apply(t,e);return!1===n&&(n=i.apply(t,e)),n||""}}n.renderer=t}if(e.tokenizer){const t=this.defaults.tokenizer||new ne(this.defaults);for(const n in e.tokenizer){if(!(n in t))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const r=n,s=e.tokenizer[r],i=t[r];t[r]=(...e)=>{let n=s.apply(t,e);return!1===n&&(n=i.apply(t,e)),n}}n.tokenizer=t}if(e.hooks){const t=this.defaults.hooks||new Fe;for(const n in e.hooks){if(!(n in t))throw new Error(`hook '${n}' does not exist`);if("options"===n)continue;const r=n,s=e.hooks[r],i=t[r];Fe.passThroughHooks.has(n)?t[r]=e=>{if(this.defaults.async)return Promise.resolve(s.call(t,e)).then((e=>i.call(t,e)));const n=s.call(t,e);return i.call(t,n)}:t[r]=(...e)=>{let n=s.apply(t,e);return!1===n&&(n=i.apply(t,e)),n}}n.hooks=t}if(e.walkTokens){const t=this.defaults.walkTokens,r=e.walkTokens;n.walkTokens=function(e){let n=[];return n.push(r.call(this,e)),t&&(n=n.concat(t.call(this,e))),n}}this.defaults={...this.defaults,...n}})),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return ze.lex(e,t??this.defaults)}parser(e,t){return qe.parse(e,t??this.defaults)}#e(e,t){return(n,r)=>{const s={...r},i={...this.defaults,...s};!0===this.defaults.async&&!1===s.async&&(i.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),i.async=!0);const o=this.#t(!!i.silent,!!i.async);if(null==n)return o(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof n)return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(i.hooks&&(i.hooks.options=i),i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(n):n).then((t=>e(t,i))).then((e=>i.hooks?i.hooks.processAllTokens(e):e)).then((e=>i.walkTokens?Promise.all(this.walkTokens(e,i.walkTokens)).then((()=>e)):e)).then((e=>t(e,i))).then((e=>i.hooks?i.hooks.postprocess(e):e)).catch(o);try{i.hooks&&(n=i.hooks.preprocess(n));let r=e(n,i);i.hooks&&(r=i.hooks.processAllTokens(r)),i.walkTokens&&this.walkTokens(r,i.walkTokens);let s=t(r,i);return i.hooks&&(s=i.hooks.postprocess(s)),s}catch(e){return o(e)}}}#t(e,t){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const e="<p>An error occurred:</p><pre>"+G(n.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(n);throw n}}};function Ve(e,t){return He.parse(e,t)}Ve.options=Ve.setOptions=function(e){return He.setOptions(e),Ve.defaults=He.defaults,z(Ve.defaults),Ve},Ve.getDefaults=function(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},Ve.defaults=B,Ve.use=function(...e){return He.use(...e),Ve.defaults=He.defaults,z(Ve.defaults),Ve},Ve.walkTokens=function(e,t){return He.walkTokens(e,t)},Ve.parseInline=He.parseInline,Ve.Parser=qe,Ve.parser=qe.parse,Ve.Renderer=De,Ve.TextRenderer=Ue,Ve.Lexer=ze,Ve.lexer=ze.lex,Ve.Tokenizer=ne,Ve.Hooks=Fe,Ve.parse=Ve,Ve.options,Ve.setOptions,Ve.use,Ve.walkTokens,Ve.parseInline,qe.parse,ze.lex;const Ge=(e,t,n)=>{const r=document.createElement("div");r.classList.add("input-label-container");const s=document.createElement("label");return s.classList.add("form-label"),s.htmlFor=e,s.innerText=t,r.appendChild(s),n?(r.appendChild(Je(n)),r):r},Je=e=>{const t=document.createElement("span");t.innerText="i";const n=document.createElement("span");return n.innerHTML=Ve.parse(e),n.classList.add("input-description"),t.appendChild(n),t},Ke=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)};class Ze extends HTMLElement{constructor(){super(),this._choices=[],this._label="",this._value="none",this._radios=[],this._radioNoneRef=null,this._rendered=!1}render(){Ke(this);const e=this._value||i.get(this.id);e&&this.setAttribute("value",e),[this.label(),this.radios()].forEach((e=>{this.appendChild(e)})),this._rendered||document.addEventListener("contract-generated",(()=>{this.dispatchEvent(new Event("input")),this.dispatchEvent(new Event("change"))})),this._rendered=!0}label(){const e=document.createElement("legend");return e.innerText=this._label,e.classList.add("form-label"),e}radios(){let e=!0;const t=document.createElement("div");return this._choices.forEach((n=>{const r=document.createElement("div");r.classList.add("radio-row");const s=`radio_${this.id}`,o=`${s}_${n}`,a=this.radio(s,o,n);n===i.get(this.id)&&(a.checked=!0,this.setAttribute("value",a.value),e=!1);const l=Ge(o,n);this._radios.push(a),r.appendChild(a),r.appendChild(l),t.appendChild(r)})),t.appendChild(this.radioNone(e)),t}radio(e,t,n){const r=j("radio",e,t,n);return r.addEventListener("click",(()=>{r.checked&&(this._value=r.value,this.setAttribute("value",this._value),i.save(this.id,this._value),r.dispatchEvent(new Event("input")))})),r}radioNone(e){const t=j("radio",`radio_${this.id}`,`${this.id}_none`,"none");return t.checked=e,t.style.display="none",this._radioNoneRef=t,t}uncheckAll(){this._radios.forEach((e=>{e.checked=!1})),this._radioNoneRef.checked=!1}connectedCallback(){this.render()}static get observedAttributes(){return["label","choices"]}attributeChangedCallback(e,t,n){switch(e){case"label":this._label=n;break;case"choices":this._choices=JSON.parse(n)}this.render()}}customElements.define("radio-group",Ze);class Qe extends Ze{constructor(){super(),this._placeholder=null,this._format=null,this._inputReference={}}render(){super.render(),this.appendChild(this.input()),this._radios.forEach((e=>{e.addEventListener("click",(()=>{this._inputReference.value="",this.dispatchEvent(new Event("input"))}))}))}input(){let e=null;this.valueIsFromRadio(i.get(this.id))||(e=i.get(this.id),this.uncheckAll(),e&&this.setAttribute("value",e));const t=j(this._format,this.id,this.id,e);return t.placeholder=this._placeholder,t.addEventListener("input",(()=>{this.uncheckAll(),this._value=t.value,this.setAttribute("value",this._value),i.save(this.id,this._value),this.dispatchEvent(new Event("input"))})),this._inputReference=t,t}valueIsFromRadio=e=>this._choices.includes(e)&&"none"!=e;static get observedAttributes(){return["placeholder","format",...super.observedAttributes]}attributeChangedCallback(e,t,n){switch(super.attributeChangedCallback(e,t,n),e){case"placeholder":this._placeholder=n;break;case"format":this._format=n}this.render()}}customElements.define("radio-with-other",Qe);const Ye=(e,t)=>{const n=document.createElement("select");return n.id=e,n.name=e,t.forEach((e=>{const t=document.createElement("option");t.innerText=e,t.value=e,n.appendChild(t)})),n},Xe=(e,t,n)=>{const r=p(e.id,t),s=j(e.schema.format,r,r,i.get(r),e.schema.rules);s.required=e.required,s.setAttribute("data-validate",n||!1),s.addEventListener("change",(()=>{i.save(r,s.value)}));const o=Ge(r,e.label,e.description);var a=O(r,["input-container"]);return a.appendChild(o),a.appendChild(s),document.addEventListener("contract-generated",(()=>{s.dispatchEvent(new Event("input")),s.dispatchEvent(new Event("change"))})),a};class We extends HTMLElement{constructor(){super(),this._choices=[],this._label="",this._description=null,this._placeholder=null,this._format=null,this._inputRules={},this._inputReference={},this._selectReference={}}render(){Ke(this),this.setAttribute("value",this._value||i.get(this.id));const e=[this.select(),this.input()],t=Ge(this._selectReference.id,this._label,this._description);this.appendChild(t),e.forEach((e=>{this.appendChild(e)})),this.addSelectEventListener(),this.addInputEventListener(),document.addEventListener("contract-generated",(()=>{this.dispatchEvent(new Event("input")),this.dispatchEvent(new Event("change"))}))}select(){const e=`select_${this.id}`,t=Ye(e,this._choices);return this._selectReference=t,t}input(){const e=`other_input_${this.id}`,t=j(this._format,e,e,null,this._inputRules);return t.placeholder=this._placeholder,this._inputReference=t,t}addSelectEventListener(){if(!this.elementsAreDefined())throw new Error("input or select must be defined before attaching select listener");this._selectReference.addEventListener("change",(()=>{this._inputReference.value="",this.setAttribute("value",this._selectReference.value),i.save(this.id,this._selectReference.value),this.dispatchEvent(new Event("input"))}))}addInputEventListener(){if(!this.elementsAreDefined())throw new Error("input or select must be defined before attaching input listener");this._inputReference.addEventListener("input",(()=>{this._selectReference.value=this._selectReference.options[0].value,this._selectReference.options[0].selected=!0,this.setAttribute("value",this._inputReference.value),this.dispatchEvent(new Event("input"))})),this._inputReference.addEventListener("change",(()=>{null!=this._inputReference.value&&i.save(this.id,this._inputReference.value)}))}elementsAreDefined(){return null!=this._inputReference&&null!=this._selectReference}static get observedAttributes(){return["choices","placeholder","format","input_rules","label"]}attributeChangedCallback(e,t,n){switch(e){case"choices":this._choices=JSON.parse(n);break;case"placeholder":this._placeholder=n;break;case"format":this._format=n;break;case"input_rules":this._inputRules=JSON.parse(n);break;case"label":this._label=n;break;case"description":this._description=n}this.render()}}customElements.define("select-with-other",We);class et extends HTMLElement{constructor(){super(),this._conditions=[],this._items=[],this._suffix}render(){Ke(this),this._items.forEach((e=>{const t=ut(e,this._suffix,!0);this.appendChild(t)})),this._conditions.forEach((e=>{const t=p(e.target,this._suffix),n=document.getElementById(t);n.addEventListener("input",(()=>{this.checkCondition(n,e)})),this.checkCondition(n,e)}))}checkCondition(e,t){const n=o(e);this.conditionIsValidated(n,t.value,t.operator)&&this.applyTriggers(t)}conditionIsValidated(e,t,n){switch(n){case"EQUAL":return e==t;case"NOT_EQUAL":return e!=t;default:return!1}}applyTriggers(e){e.triggers.forEach((e=>{const t=p(e.target,this._suffix),n=document.getElementById(`container_${t}`);switch(e.action){case"show":n.style.display="block",n.querySelectorAll('[data-validate="false"]').forEach((e=>{e.setAttribute("data-validate",!0)}));break;case"hide":n.style.display="none",n.querySelectorAll('[data-validate="true"]').forEach((e=>{e.setAttribute("data-validate",!1)}))}}))}connectedCallback(){this.render()}set items(e){this._items=e}set conditions(e){this._conditions=e}set suffix(e){this._suffix=e}}customElements.define("conditionnal-form",et);class tt extends HTMLElement{constructor(){super(),this._alreadyRendered=!1,this._operator="",this._references=[],this._value=0,this._values=new Map,this._applySuffixToReferences,this._suffix=""}render(){for(const e of this._references)null!=e.loop?this.addLoopListener(e):null!=e.array?this.addArrayListener(e):this.addInputListener(e.target,e.absolute_ref);this._alreadyRendered=!0}addInputListener(e,t=!1){this._applySuffixToReferences&&!t&&(e=`${e}_${this._suffix}`);const n=document.getElementById(e),r=()=>{this._values.set(e,parseFloat(o(n))||0),this.doOperation(),this.dispatchEvent(new Event("input"))};n.addEventListener("input",r),r()}addLoopListener(e){"gather_all"===e.operation_on_children_loop&&document.getElementById(e.loop).addEventListener("has_looped",(()=>{this.addInputsGroupEventListener(e)})),"distinct"===e.operation_on_children_loop&&(this._applySuffixToReferences=!0,this.addInputListener(e.target,e.absolute_ref))}addArrayListener(e){const t=document.getElementById(e.array);t.addEventListener("newRow",(()=>{this.addInputsGroupEventListener(e)})),t.addEventListener("rowDeleted",(()=>{this.addInputsGroupEventListener(e)}))}addInputsGroupEventListener(e){const t=document.querySelectorAll(`[id^="${e.target}"]`);for(const n of t)this.addInputListener(n.id,e.absolute_ref);this.clearMapOldInputs(Array.from(t))}doOperation(){}clearMapOldInputs(e){const t=[...this._values.keys()],n=[];e.forEach((e=>{n.push(e.id)})),t.forEach((e=>{n.includes(e)||this._values.delete(e)})),this.doOperation(),this.dispatchEvent(new Event("input"))}set references(e){this._references=e}set applySuffixToReferences(e){this._applySuffixToReferences=e}connectedCallback(){this._alreadyRendered||(this.setAttribute("hidden",!0),this.render())}static get observedAttributes(){return["operator","suffix"]}attributeChangedCallback(e,t,n){switch(e){case"operator":this._operator=n.toLowerCase();break;case"suffix":this._suffix=n}this.render()}}class nt extends tt{constructor(){super()}doOperation(){let e;this._values.forEach((t=>{null==e?e=t:0!==t&&(e/=t)})),this.setAttribute("value",Math.round(100*e)/100)}}customElements.define("divide-element",nt);class rt extends tt{constructor(){super()}doOperation(){const e=Array.from(this._values,(([e,t])=>t));let t=0;if(e.length>0){t=e[0];for(let n=1;n<e.length;n++)t-=e[n]}this.setAttribute("value",t)}}customElements.define("minus-element",rt);class st extends tt{constructor(){super()}doOperation(){let e=1;this._values.forEach((t=>{e*=t})),this.setAttribute("value",e)}}customElements.define("multiply-element",st);class it extends tt{constructor(){super()}doOperation(){let e=0;this._values.forEach((t=>{e+=t})),this.setAttribute("value",e)}}customElements.define("sum-element",it);const ot=(e,t,n=!1,r)=>{const s=p(e.id,t),i=at(e.schema.operator.toLowerCase());return i.references=e.schema.references,i.setAttribute("id",s),i.setAttribute("data-validate",r||!1),null!=t&&(i.applySuffixToReferences=n,i.setAttribute("suffix",t)),i.setAttribute("operator",e.schema.operator),i},at=e=>{switch(e){case"add":return new it;case"minus":return new rt;case"divide":return new nt;case"multiply":return new st}};class lt extends HTMLElement{constructor(e,t,n,r,s){super(),this._columns=e,this._computations=t,this._totalConfiguration=n,this._summaryText=r,this._suffix=s,this._rowsCounter=0,this._buttonReference=null,this._totalInputRef=null,this._activeRows=[],this._rendered=!1,this._generated=!1}render(){this._rendered=!0;const e=this.createRowButton();this._buttonReference=e;const t=this.createTotal();this._totalInputRef=t,this.appendChild(e),this.appendChild(t),document.addEventListener("resume-elements-makers",(()=>{this.generateFromActiveRows()})),document.addEventListener("contract-generated",(()=>{this.dispatchEvent(new Event("newRow"))}))}createRow(e,t){const n=document.createElement("details");n.id=`row_${this.id}_${e}`,this.insertBefore(n,this._buttonReference);const r=this.createSummary(this._summaryText.replace("$x",this._rowsCounter));n.appendChild(r),n.appendChild(this.createColumns(e,t)),n.appendChild(this.computations(e)),n.appendChild(this.createDeleteRowButton(n.id,e))}createSummary=e=>{const t=document.createElement("summary"),n=document.createElement("p");n.innerText=e;const r=document.createElement("div");return r.innerHTML="<svg width='20' height='20' viewBox='0 0 667 667' xmlns='http://www.w3.org/2000/svg'>\n<path fill-rule='evenodd' clip-rule='evenodd' d='M366.667 233.333C366.667 214.924 351.743 200 333.333 200C314.923 200 300 214.924 300 233.333V300H233.333C214.924 300 200 314.923 200 333.333C200 351.743 214.924 366.667 233.333 366.667H300V433.333C300 451.743 314.923 466.667 333.333 466.667C351.743 466.667 366.667 451.743 366.667 433.333V366.667H433.333C451.743 366.667 466.667 351.743 466.667 333.333C466.667 314.923 451.743 300 433.333 300H366.667V233.333ZM175.002 12.9273C218.293 3.30667 270.81 0 333.333 0C395.857 0 448.373 3.30667 491.663 12.9273C535.333 22.6323 571.627 39.2 599.547 67.1193C627.467 95.0387 644.033 131.334 653.74 175.002C663.36 218.293 666.667 270.81 666.667 333.333C666.667 395.857 663.36 448.373 653.74 491.663C644.033 535.333 627.467 571.627 599.547 599.547C571.627 627.467 535.333 644.033 491.663 653.74C448.373 663.36 395.857 666.667 333.333 666.667C270.81 666.667 218.293 663.36 175.002 653.74C131.334 644.033 95.0387 627.467 67.1193 599.547C39.2 571.627 22.6323 535.333 12.9273 491.663C3.30667 448.373 0 395.857 0 333.333C0 270.81 3.30667 218.293 12.9273 175.002C22.6323 131.334 39.2 95.0387 67.1193 67.1193C95.0387 39.2 131.334 22.6323 175.002 12.9273Z'/>\n</svg>",t.appendChild(n),t.appendChild(r),t};createColumns(e,t){const n=`col_${this.id}_${e}`,r=O(n),s=[];return this._columns.forEach((t=>{const n=Object.assign({},t);n.id=p(n.id,this._suffix);const i=Xe(n,e,!0);r.appendChild(i),s.push(i.lastChild.id)})),t&&this._activeRows.push(s),r}computations(e){const t=`computations_${this.id}_${e}`,n=O(t);return JSON.parse(JSON.stringify(this._computations)).forEach((t=>{t.schema.references.forEach((e=>{e.target=p(e.target,this._suffix)})),t.id=p(t.id,this._suffix);const r=ot(t,e,!0);n.appendChild(r)})),n}createTotal(){const e=JSON.parse(JSON.stringify(this._totalConfiguration));return e.schema.references.forEach((e=>{e.target=p(e.target,this._suffix),e.array=this.id})),ot(e,this._suffix,!1,!0)}createRowButton(){const e=document.createElement("button");e.type="button",e.classList.add("array-add-row-button");const t=document.createElement("p");t.innerText="Ajouter un item";const n=document.createElement("div");return n.innerHTML="<svg width='20' height='20' viewBox='0 0 667 667' xmlns='http://www.w3.org/2000/svg'>\n<path fill-rule='evenodd' clip-rule='evenodd' d='M366.667 233.333C366.667 214.924 351.743 200 333.333 200C314.923 200 300 214.924 300 233.333V300H233.333C214.924 300 200 314.923 200 333.333C200 351.743 214.924 366.667 233.333 366.667H300V433.333C300 451.743 314.923 466.667 333.333 466.667C351.743 466.667 366.667 451.743 366.667 433.333V366.667H433.333C451.743 366.667 466.667 351.743 466.667 333.333C466.667 314.923 451.743 300 433.333 300H366.667V233.333ZM175.002 12.9273C218.293 3.30667 270.81 0 333.333 0C395.857 0 448.373 3.30667 491.663 12.9273C535.333 22.6323 571.627 39.2 599.547 67.1193C627.467 95.0387 644.033 131.334 653.74 175.002C663.36 218.293 666.667 270.81 666.667 333.333C666.667 395.857 663.36 448.373 653.74 491.663C644.033 535.333 627.467 571.627 599.547 599.547C571.627 627.467 535.333 644.033 491.663 653.74C448.373 663.36 395.857 666.667 333.333 666.667C270.81 666.667 218.293 663.36 175.002 653.74C131.334 644.033 95.0387 627.467 67.1193 599.547C39.2 571.627 22.6323 535.333 12.9273 491.663C3.30667 448.373 0 395.857 0 333.333C0 270.81 3.30667 218.293 12.9273 175.002C22.6323 131.334 39.2 95.0387 67.1193 67.1193C95.0387 39.2 131.334 22.6323 175.002 12.9273Z'/>\n</svg>",e.appendChild(t),e.appendChild(n),e.addEventListener("click",(()=>{this._rowsCounter+=1,this.createRow(crypto.randomUUID(),!0),i.save(this.id,JSON.stringify(this._activeRows)),this.dispatchEvent(new Event("newRow"))})),e}createDeleteRowButton(e,t){const n=document.createElement("button");n.innerText="Supprimer",n.type="button",n.classList.add("array-delete-row-button"),n.addEventListener("click",(()=>{const n=document.getElementById(e);this.removeChild(n);const r=this._activeRows.findIndex((e=>{for(let n=0;n<e.length;n++)return!!e[n].includes(t)&&(this.deleteRowInLocalStorage(e),!0)}));this._activeRows.splice(r,1),this._rowsCounter-=1,this.updateSummaryText(),i.save(this.id,JSON.stringify(this._activeRows)),this.dispatchEvent(new Event("rowDeleted"))}));const r=document.createElement("div");return r.style="display:flex; flex-direction:row; justify-content:end",r.appendChild(n),r}generateFromActiveRows(){this._generated||(this._activeRows=JSON.parse(i.get(this.id))||[],this._activeRows.forEach((e=>{if(e.length>0){const t=e[0].split("_").pop();null!=t&&(this._rowsCounter+=1,this.createRow(t,!1),this.dispatchEvent(new Event("newRow")))}})),this._generated=!0)}updateSummaryText(){this.querySelectorAll("summary").forEach(((e,t)=>{e.innerText=this._summaryText.replace("$x",t+1)}))}deleteRowInLocalStorage(e){e.forEach((e=>{localStorage.removeItem(e)}))}get columns(){return this._columns}get rowsCounter(){return this._rowsCounter}set totalInputRef(e){this._totalInputRef=e}get totalInputRef(){return this._totalInputRef}get activeRows(){return this._activeRows}connectedCallback(){this._rendered||this.render()}}customElements.define("array-element",lt);class ct extends HTMLElement{constructor(e,t){super(),this._targetId=e,this._value=null,this._suffix=t}render(){if(!this._targetId)throw new Error("NumberToLetter target in null or undefined");this.hidden=!0;const e=document.getElementById(p(this._targetId,this._suffix));this.value=i.get(this.id),e.addEventListener("input",(e=>{const t=o(e.target);this.value=this.numberToLetter(parseInt(t)||0),i.save(this.id,this.value),this.dispatchEvent(new Event("input"))}))}numberToLetter(e){if(e<0||e>999999999)throw new RangeError("Number out of supported range (0-999999999)");const t=["","UN","DEUX","TROIS","QUATRE","CINQ","SIX","SEPT","HUIT","NEUF"],n=["DIX","ONZE","DOUZE","TREIZE","QUATORZE","QUINZE","SEIZE","DIX-SEPT","DIX-HUIT","DIX-NEUF"],r=["","DIX","VINGT","TRENTE","QUARANTE","CINQUANTE","SOIXANTE","SOIXANTE-DIX","QUATRE-VINGT","QUATRE-VINGT-DIX"];function s(e){let s="";if(e>=100){const n=Math.floor(e/100);s+=n>1?t[n]+" CENT":"CENT",(e%=100)>0&&(s+=" ")}if(e>=20){const i=Math.floor(e/10),o=e%10;7===i||9===i?(s+=r[i-1],o>0&&(s+=1===o&&7===i?"-ET-"+n[o]:"-"+n[o])):(s+=r[i],1===o&&8!==i?s+="-ET-UN":o>0&&(s+="-"+t[o]))}else e>=10?s+=n[e-10]:e>0&&(s+=t[e]);return s.trim()}function i(e,t){const n=s(e);return"UN"===n&&"MILLE"===t?`${t} `:n?`${n} ${t} `:""}const o=Math.floor(e/1e6);e%=1e6;const a=Math.floor(e/1e3),l=e%=1e3;let c="";return o>0&&(c+=i(o,1===o?"MILLION":"MILLIONS")),a>0&&(c+=i(a,"MILLE")),c+=s(l),c.trim()}connectedCallback(){this.render()}}customElements.define("number-to-letter",ct);const ut=(e,t,n)=>{switch(e.schema.type){case"input":return Xe(e,t,n);case"radio":return((e,t,n)=>{const r=p(e.id,t),s=O(r,["input-container"]),i=new Ze;return i.setAttribute("id",r),i.setAttribute("label",e.label),i.setAttribute("choices",JSON.stringify(e.schema.choices)),i.setAttribute("data-validate",n||!1),s.appendChild(i),s})(e,t,n);case"radio_with_other":return((e,t,n)=>{const r=p(e.id,t),s=O(r,["input-container"]),i=new Qe;return i.setAttribute("id",r),i.setAttribute("label",e.label),i.setAttribute("choices",JSON.stringify(e.schema.choices)),i.setAttribute("format",JSON.stringify(e.schema.format)),i.setAttribute("placeholder",JSON.stringify(e.schema.placeholder)),i.setAttribute("data-validate",n||!1),s.appendChild(i),s})(e,t,n);case"select":return((e,t,n)=>{const r=p(e.id,t),s=O(r,["input-container"]),o=Ye(r,e.schema.choices);return o.value=i.get(r)||e.schema.choices[0]||void 0,o.setAttribute("data-validate",n||!1),o.addEventListener("change",(()=>{i.save(r,o.value)})),null!=e.label&&s.appendChild(Ge(r,e.label,e.description)),document.addEventListener("contract-generated",(()=>{o.dispatchEvent(new Event("input")),o.dispatchEvent(new Event("change"))})),s.appendChild(o),s})(e,t,n);case"select_with_other":return((e,t,n)=>{const r=p(e.id,t),s=O(r,["input-container"]),i=new We;return i.setAttribute("id",r),i.setAttribute("choices",JSON.stringify(e.schema.choices)),i.setAttribute("placeholder",e.schema.placeholder),i.setAttribute("format",e.schema.format),i.setAttribute("label",e.label),i.setAttribute("description",e.description),i.setAttribute("input_rules",JSON.stringify(e.schema.rules||"")),i.setAttribute("data-validate",n||!1),s.appendChild(i),s})(e,t,n);case"conditional_form":return((e,t)=>{const n=p(e.id,t),r=O(n,["input-container"]),s=new et;return s.setAttribute("id",n),s.items=e.schema.items,s.conditions=e.schema.conditions,s.suffix=t,r.appendChild(s),r})(e,t);case"form_group":return((e,t)=>{const n=p(e.id,t),r=O(n),s=document.getElementById("workspace");if(s.appendChild(r),void 0!==e.label){const t=Ge(n,e.label,e.description);r.appendChild(t)}return e.schema.items.forEach((e=>{r.appendChild(ut(e,t,!0))})),s.removeChild(r),r})(e,t);case"loop":return wt(e);case"computed":return ot(e,t,!1,n);case"array":return((e,t)=>{const n=p(e.id,t),r=O(n,["input-container"]),s=new lt(e.schema.columns,e.schema.computations,e.schema.total,e.label,t);return s.setAttribute("id",n),r.appendChild(s),r})(e,t);case"date_adder":return((e,t,n)=>{const r=p(e.id,t),s=O(r),o=j("date",r,r,i.get(r));o.setAttribute("data-validate",n||!1),o.addEventListener("change",(()=>{i.save(r,o.value)}));const a=document.getElementById(e.schema.target);if("date"!==a.type)throw new Error("date adder target must be of type date");return a.addEventListener("change",(()=>{const t=a.valueAsDate;null!=t&&(t.setDate(t.getDate()+parseInt(e.schema.days)||0),t.setMonth(t.getMonth()+parseInt(e.schema.months)||0),t.setFullYear(t.getFullYear()+parseInt(e.schema.years)||0),o.setAttribute("value",t.toISOString().split("T")[0]),o.value=t.toISOString().split("T")[0],o.dispatchEvent(new Event("input")))})),s.appendChild(o),s.hidden=!0,document.addEventListener("contract-generated",(()=>{o.dispatchEvent(new Event("input")),o.dispatchEvent(new Event("change"))})),s})(e,t,n);case"number_to_letter":return((e,t,n)=>{const r=p(e.id,t),s=new ct(e.schema.target,t);return s.setAttribute("id",r),s})(e,t);default:return document.createElement("div")}},dt=(e,t=[],n,r)=>{const i=document.getElementById("page_number_total");pt(i.value,e);const o=gt(e,n),a=document.getElementById("workspace");a.appendChild(o),_t(o,t),a.removeChild(o),document.getElementById("contract-form").insertBefore(o,document.getElementById(`page_${e+1}`));let l=parseInt(i.value);return l+=1,i.setAttribute("value",l++),i.dispatchEvent(new Event("input")),s.createSegmentAt(e-1),document.getElementById("next_button").querySelector("span").innerText="SUIVANT",document.getElementById("next_button").setAttribute("data-time-to-validate",!1),o},ht=e=>{const t=document.getElementById("page_number_total"),n=document.getElementById(e),r=vt(e);ft(t.value,r),document.getElementById("contract-form").removeChild(n);let i=parseInt(t.value);i-=1,t.setAttribute("value",i),t.dispatchEvent(new Event("input")),s.deleteSegmentAt(r-1)},pt=(e,t)=>{mt(e,t,(e=>`page_${parseInt(e)+1}`))},ft=(e,t)=>{mt(e,t,(e=>"page_"+(parseInt(e)-1)))},mt=(e,t,n)=>{const r=[],s=[];for(let i=t;i<=e;i++){const e=i,t=document.getElementById(`page_${e}`);r.push(t),s.push(n(e))}for(let e=0;e<r.length;e++)r[e].id=s[e]},gt=(e,t)=>{const n=document.createElement("div");return n.id=`page_${e}`,n.hidden=!0,bt(n,t),n},bt=(e,t)=>{null!=t&&e.setAttribute("data-page-title",t)},_t=(e,t,n)=>{t.forEach((t=>{e.appendChild(ut(t,n,!0))}))},vt=e=>parseInt(e.split("_").pop());class yt extends HTMLElement{constructor(e,t){super(),this._items=e,this._iteratorId,this._label=t||"",this._iteratorReference={},this._createdPageCount=0,this._startingPageNumber=0,this._lastCreatedPageNumber=0}render(){const e=document.getElementById(this._iteratorId);null!=e&&this._items!=[]&&(this._iteratorReference=e,this.applyLoop=this.applyLoop.bind(this),e.removeEventListener("input",this.applyLoop,!0),e.addEventListener("input",this.applyLoop,!0),document.addEventListener("resume-page-maker-elements",(()=>{this.resume()})))}applyLoop(){const e=parseInt(o(this._iteratorReference));if(isNaN(e))return;this.previousSibling.nodeName===this.nodeName?this._startingPageNumber=parseInt(this.previousSibling.getAttribute("last_created_page_number"))+1:this._startingPageNumber=parseInt(this.previousSibling.id.split("_").pop())+1;const t=this._createdPageCount-e,n=e-this._createdPageCount;t>0&&this.deletePages(e),n>0&&this.addPages(n),this._createdPageCount=e,this.setAttribute("last_created_page_number",this._startingPageNumber+this._createdPageCount-1),this.dispatchEvent(new Event("has_looped"))}deletePages(e){for(let t=this._createdPageCount;t>e;t--){const e="page_"+(parseInt(this._startingPageNumber)+t-1);ht(e)}}addPages(e){const t=parseInt(this._startingPageNumber)+parseInt(this._createdPageCount),n=parseInt(this._startingPageNumber)+parseInt(this._createdPageCount)+parseInt(e)-1;let r=this._createdPageCount;for(let e=t;e<=n;e++){const t=this._label.replace("$x",r+1)||"",n=dt(e,[],t,this._startingPageNumber);this._items.forEach((e=>{const t=ut(e,r,!0);n.appendChild(t)})),r++}}resume(){this.applyLoop()}set items(e){this._items=e}connectedCallback(){this.render()}static get observedAttributes(){return["iterator_id"]}attributeChangedCallback(e,t,n){"iterator_id"===e&&(this._iteratorId=n),this.render()}}const wt=e=>{const t=document.getElementById("contract-form"),n=new yt(e.schema.items,e.label);return t.appendChild(n),n.setAttribute("id",e.id),n.setAttribute("iterator_id",e.schema.iterator),n};customElements.define("loop-el",yt);const kt={generate:e=>{let t=1;e.forEach((e=>{"loop"===e.schema.items[0].schema.type?wt(e.schema.items[0],t):(((e,t)=>{const n=gt(t,e.label);document.getElementById("contract-form").appendChild(n),_t(n,e.schema.items)})(e,t),t+=1)})),document.getElementById("page_number_total").setAttribute("value",t-1);const n=document.getElementById("page_1");n.hidden=!1,document.getElementById("page-title").innerText=n.getAttribute("data-page-title")},resume:()=>{const e=document.getElementById("contract-form");let t=e.querySelectorAll('[id^="page_"]');for(let n=0;n<t.length;n++){const r=t[n],i=parseInt(r.id.split("_").pop());a(i)?s.segmentIsValid(i-1):s.segmentIsNotValid(i-1),t=e.querySelectorAll('[id^="page_"]')}}},xt=kt;var Et=n(829),Ct=n.n(Et);function At(e){return function(e){if(Array.isArray(e))return It(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return It(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?It(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Tt,Rt,Lt,St,Ot,jt=(Tt=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],Rt=function(){function e(t){var n=t.targetModal,r=t.triggers,s=void 0===r?[]:r,i=t.onShow,o=void 0===i?function(){}:i,a=t.onClose,l=void 0===a?function(){}:a,c=t.openTrigger,u=void 0===c?"data-micromodal-trigger":c,d=t.closeTrigger,h=void 0===d?"data-micromodal-close":d,p=t.openClass,f=void 0===p?"is-open":p,m=t.disableScroll,g=void 0!==m&&m,b=t.disableFocus,_=void 0!==b&&b,v=t.awaitCloseAnimation,y=void 0!==v&&v,w=t.awaitOpenAnimation,k=void 0!==w&&w,x=t.debugMode,E=void 0!==x&&x;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modal=document.getElementById(n),this.config={debugMode:E,disableScroll:g,openTrigger:u,closeTrigger:h,openClass:f,onShow:o,onClose:l,awaitCloseAnimation:y,awaitOpenAnimation:k,disableFocus:_},s.length>0&&this.registerTriggers.apply(this,At(s)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var t;return(t=[{key:"registerTriggers",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.filter(Boolean).forEach((function(t){t.addEventListener("click",(function(t){return e.showModal(t)}))}))}},{key:"showModal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation?this.modal.addEventListener("animationend",(function t(){e.modal.removeEventListener("animationend",t,!1),e.setFocusToFirstNode()}),!1):this.setFocusToFirstNode(),this.config.onShow(this.modal,this.activeElement,t)}},{key:"closeModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,e),this.config.awaitCloseAnimation){var n=this.config.openClass;this.modal.addEventListener("animationend",(function e(){t.classList.remove(n),t.removeEventListener("animationend",e,!1)}),!1)}else t.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(e){this.modal=document.getElementById(e),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(e){if(this.config.disableScroll){var t=document.querySelector("body");switch(e){case"enable":Object.assign(t.style,{overflow:""});break;case"disable":Object.assign(t.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(e){(e.target.hasAttribute(this.config.closeTrigger)||e.target.parentNode.hasAttribute(this.config.closeTrigger))&&(e.preventDefault(),e.stopPropagation(),this.closeModal(e))}},{key:"onKeydown",value:function(e){27===e.keyCode&&this.closeModal(e),9===e.keyCode&&this.retainFocus(e)}},{key:"getFocusableNodes",value:function(){var e=this.modal.querySelectorAll(Tt);return Array.apply(void 0,At(e))}},{key:"setFocusToFirstNode",value:function(){var e=this;if(!this.config.disableFocus){var t=this.getFocusableNodes();if(0!==t.length){var n=t.filter((function(t){return!t.hasAttribute(e.config.closeTrigger)}));n.length>0&&n[0].focus(),0===n.length&&t[0].focus()}}}},{key:"retainFocus",value:function(e){var t=this.getFocusableNodes();if(0!==t.length)if(t=t.filter((function(e){return null!==e.offsetParent})),this.modal.contains(document.activeElement)){var n=t.indexOf(document.activeElement);e.shiftKey&&0===n&&(t[t.length-1].focus(),e.preventDefault()),!e.shiftKey&&t.length>0&&n===t.length-1&&(t[0].focus(),e.preventDefault())}else t[0].focus()}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}(),Lt=null,St=function(e){if(!document.getElementById(e))return console.warn("MicroModal: ❗Seems like you have missed %c'".concat(e,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(e,'"></div>')),!1},Ot=function(e,t){if(function(e){e.length<=0&&(console.warn("MicroModal: ❗Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(e),!t)return!0;for(var n in t)St(n);return!0},{init:function(e){var t=Object.assign({},{openTrigger:"data-micromodal-trigger"},e),n=At(document.querySelectorAll("[".concat(t.openTrigger,"]"))),r=function(e,t){var n=[];return e.forEach((function(e){var r=e.attributes[t].value;void 0===n[r]&&(n[r]=[]),n[r].push(e)})),n}(n,t.openTrigger);if(!0!==t.debugMode||!1!==Ot(n,r))for(var s in r){var i=r[s];t.targetModal=s,t.triggers=At(i),Lt=new Rt(t)}},show:function(e,t){var n=t||{};n.targetModal=e,!0===n.debugMode&&!1===St(e)||(Lt&&Lt.removeEventListeners(),(Lt=new Rt(n)).showModal())},close:function(e){e?Lt.closeModalById(e):Lt.closeModal()}});"undefined"!=typeof window&&(window.MicroModal=jt);const $t=jt,Nt=()=>{$t.show("dialog")},Pt=()=>{$t.close("dialog")},Mt=e=>{const t=document.getElementById("modal-content");t.replaceChildren(""),t.innerText=e},Bt="Un problème est survenu lors de la récupération du contrat. Veuillez contacter un administrateur.",zt=(()=>{const e=()=>{const e=i.get("report");let n=JSON.parse(e)||[];if(i.save("filled_contract",document.getElementById("preview").innerHTML),n.length<=0)return void(window.location.href="/payment?contract_name="+i.getContractName());const r=t();var s;document.getElementById("dialog-title").innerText="Etes vous sûrs de vouloir poursuivre ? Certaines réponses sont incomplètes:",s=r,document.getElementById("modal-content").replaceChildren(""),document.getElementById("modal-content").appendChild(s),Nt()},t=()=>{const e=document.createElement("div");let t=JSON.parse(i.get("report"))||[];t.sort(),t.forEach((t=>{const n=`Page ${t} - ${document.getElementById(`page_${t}`).dataset.pageTitle}`,r=document.createElement("p");r.innerText=n,r.classList.add("report-line"),r.addEventListener("click",(e=>{l(((e,n,r)=>(s.selectSegment(t-1),t)))(),Pt()})),e.appendChild(r)}));const o=document.createElement("div");return o.classList.add("report-modal-buttons-container"),o.appendChild(n()),o.appendChild(r(parseInt(t[0])||void 0)),e.appendChild(o),e},n=()=>{const e=document.createElement("a");return e.classList.add("pay-button"),e.innerText="PAYER",e.href="/payment?contract_name="+i.getContractName(),e},r=e=>{const t=document.createElement("button");return t.innerText="Retour sur le formulaire",t.addEventListener("click",(()=>{e&&(l(((t,n,r)=>(s.selectSegment(e-1),e)))(),Pt())})),t.classList.add("back-to-form"),t};return{init:t=>{document.getElementById(t.nextButtonId).addEventListener("form-ended",e)}}})();window.onload=async()=>{$t.init({onClose:e=>console.info(`${e.id} is hidden`),closeTrigger:"data-custom-close",openClass:"is-open",disableScroll:!0,disableFocus:!1,awaitOpenAnimation:!1,awaitCloseAnimation:!1,debugMode:!1}),Nt(),Mt("Chargement de votre contrat...");const n=new URLSearchParams(window.location.search),r=n.get("contract_name")||void 0,o="true"===n.get("resume")||!1;if(!r)return Mt("Aucun contrat n'a été sélectionné."),void window.history.back();i.init(r),o||i.clear();const{jsonData:a,parsedTemplateDOM:c,paymentLink:u}=await(async(e,t,n)=>{const r=new(Ct())({apiKey:n}).base(e),s=await r("Template").select({filterByFormula:`{Nom} = "${t}"`,maxRecords:1}).firstPage();if(!s||s.length<1)throw Mt(Bt),new Error("Unknown contract or base");const i=s[0];if(!(e=>e.fields&&e.fields.JSON&&e.fields.JSON[0])(i))throw Mt(Bt),new Error('Missing "JSON" in template.');const o=JSON.parse(i.fields.JSON[0]);if(!i.fields||!i.fields["Template Content"])throw Mt(Bt),new Error('Field "Template Content" is missing in the template.');if(!i.fields["Stripe Payment Link"])throw Mt(Bt),new Error('Field "Stripe Payment Link" is missing in the template.');const a=i.fields["Template Content"];return{jsonData:o,parsedTemplateDOM:(new DOMParser).parseFromString(a,"text/html"),paymentLink:i.fields["Stripe Payment Link"]}})(contractDBID,r,contractDBKey);xt.generate(a),(e=>{let t=e.body.innerHTML;const n=t.split(/\r\n|\n/);t=S(n).join(""),document.getElementById("preview").innerHTML+=t,(()=>{const e=document.getElementById("preview").clientWidth,t=R(e,16),n=R(e,32),r=R(e,23),s=document.createElement("style");s.setAttribute("id","preview-css");const i=`#preview p, #preview ul {font-size:${t}px;} #preview h1 {font-size:${n}px;} #preview h2 {font-size:${r}px;} `;s.textContent=i,document.getElementsByTagName("head")[0].appendChild(s)})()})(c),s.init({container:"progress-bar",activeSegmentClass:"progress-active",validSegmentClass:"progress-valid",invalidSegmentClass:"progress-invalid",segmentClass:"progress-segment",onSegmentClick:l(((e,t,n)=>{const r=n.target.parentElement,i=Array.from(r.children).indexOf(n.target);return s.selectSegment(i),i+1})),getSegmentCount:()=>parseInt(document.getElementById("page_number_total").value)}),zt.init({nextButtonId:"next_button"}),(()=>{const n=l(e);document.getElementById("next_button").addEventListener("click",n);const r=l(t);document.getElementById("prev_button").addEventListener("click",r)})(),!0===o&&(document.dispatchEvent(new Event("resume-page-maker-elements")),document.dispatchEvent(new Event("resume-elements-makers")),document.dispatchEvent(new Event("contract-generated")),xt.resume()),i.save("payment_link",u),localStorage.setItem(r,!0),Pt()}})()})();
