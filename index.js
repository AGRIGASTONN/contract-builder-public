(()=>{var e={829:(e,t,n)=>{e.exports=function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,(function(e){return i(t[a][1][e]||e)}),c,c.exports,e,t,n,r)}return n[a].exports}for(var o=void 0,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";var r,i="undefined"!=typeof window?window:"undefined"!=typeof self?self:null;r=i?"signal"in new Request("https://airtable.com")?i.AbortController:e("abortcontroller-polyfill/dist/cjs-ponyfill").AbortController:e("abort-controller"),t.exports=r},{"abort-controller":20,"abortcontroller-polyfill/dist/cjs-ponyfill":19}],2:[function(e,t,n){"use strict";var r=function(){function e(e,t,n){this.error=e,this.message=t,this.statusCode=n}return e.prototype.toString=function(){return[this.message,"(",this.error,")",this.statusCode?"[Http code "+this.statusCode+"]":""].join("")},e}();t.exports=r},{}],3:[function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=i(e("lodash/get")),a=i(e("lodash/isPlainObject")),s=i(e("lodash/keys")),l=i(e("./fetch")),c=i(e("./abort-controller")),u=i(e("./object_to_query_param_string")),d=i(e("./airtable_error")),h=i(e("./table")),f=i(e("./http_headers")),p=i(e("./run_action")),m=i(e("./package_version")),_=i(e("./exponential_backoff_with_jitter")),v="Airtable.js/"+m.default,g=function(){function e(e,t){this._airtable=e,this._id=t}return e.prototype.table=function(e){return new h.default(this,null,e)},e.prototype.makeRequest=function(e){var t,n=this;void 0===e&&(e={});var i=o.default(e,"method","GET").toUpperCase(),a=this._airtable._endpointUrl+"/v"+this._airtable._apiVersionMajor+"/"+this._id+o.default(e,"path","/")+"?"+u.default(o.default(e,"qs",{})),s=new c.default,h={method:i,headers:this._getRequestHeaders(Object.assign({},this._airtable._customHeaders,null!==(t=e.headers)&&void 0!==t?t:{})),signal:s.signal};"body"in e&&function(e){return"GET"!==e&&"DELETE"!==e}(i)&&(h.body=JSON.stringify(e.body));var f=setTimeout((function(){s.abort()}),this._airtable._requestTimeout);return new Promise((function(t,i){l.default(a,h).then((function(a){if(clearTimeout(f),429!==a.status||n._airtable._noRetryIfRateLimited)a.json().then((function(e){var r=n._checkStatusForError(a.status,e)||b(a.status,e);r?i(r):t({statusCode:a.status,headers:a.headers,body:e})})).catch((function(){var e=b(a.status);i(e)}));else{var s=o.default(e,"_numAttempts",0),l=_.default(s);setTimeout((function(){var o=r(r({},e),{_numAttempts:s+1});n.makeRequest(o).then(t).catch(i)}),l)}})).catch((function(e){clearTimeout(f),e=new d.default("CONNECTION_ERROR",e.message,null),i(e)}))}))},e.prototype.runAction=function(e,t,n,r,i){p.default(this,e,t,n,r,i,0)},e.prototype._getRequestHeaders=function(e){var t=new f.default;t.set("Authorization","Bearer "+this._airtable._apiKey),t.set("User-Agent",v),t.set("Content-Type","application/json");for(var n=0,r=s.default(e);n<r.length;n++){var i=r[n];t.set(i,e[i])}return t.toJSON()},e.prototype._checkStatusForError=function(e,t){var n=(null!=t?t:{error:{}}).error,r=void 0===n?{}:n,i=r.type,o=r.message;return 401===e?new d.default("AUTHENTICATION_REQUIRED","You should provide valid api key to perform this operation",e):403===e?new d.default("NOT_AUTHORIZED","You are not authorized to perform this operation",e):404===e?new d.default("NOT_FOUND",null!=o?o:"Could not find what you are looking for",e):413===e?new d.default("REQUEST_TOO_LARGE","Request body is too large",e):422===e?new d.default(null!=i?i:"UNPROCESSABLE_ENTITY",null!=o?o:"The operation cannot be processed",e):429===e?new d.default("TOO_MANY_REQUESTS","You have made too many requests in a short period of time. Please retry your request later",e):500===e?new d.default("SERVER_ERROR","Try again. If the problem persists, contact support.",e):503===e?new d.default("SERVICE_UNAVAILABLE","The service is temporarily unavailable. Please retry shortly.",e):e>=400?new d.default(null!=i?i:"UNEXPECTED_ERROR",null!=o?o:"An unexpected error occurred",e):null},e.prototype.doCall=function(e){return this.table(e)},e.prototype.getId=function(){return this._id},e.createFunctor=function(t,n){var r=new e(t,n),i=function(e){return r.doCall(e)};return i._base=r,i.table=r.table.bind(r),i.makeRequest=r.makeRequest.bind(r),i.runAction=r.runAction.bind(r),i.getId=r.getId.bind(r),i},e}();function b(e,t){return a.default(t)?null:new d.default("UNEXPECTED_ERROR","The response from Airtable was invalid JSON. Please try again soon.",e)}t.exports=g},{"./abort-controller":1,"./airtable_error":2,"./exponential_backoff_with_jitter":6,"./fetch":7,"./http_headers":9,"./object_to_query_param_string":11,"./package_version":12,"./run_action":16,"./table":17,"lodash/get":77,"lodash/isPlainObject":89,"lodash/keys":93}],4:[function(e,t,n){"use strict";t.exports=function(e,t,n){return void 0===n&&(n=void 0),function(){for(var r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if("function"!=typeof i[r=void 0===n?i.length>0?i.length-1:0:n]){for(var a=[],s=Math.max(i.length,r),l=0;l<s;l++)a.push(i[l]);return new Promise((function(n,r){a.push((function(e,t){e?r(e):n(t)})),e.apply(t,a)}))}e.apply(t,i)}}},{}],5:[function(e,t,n){"use strict";var r={};t.exports=function(e,t,n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];r[t]||(r[t]=!0,console.warn(n)),e.apply(this,i)}}},{}],6:[function(e,t,n){"use strict";var r=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(e("./internal_config.json"));t.exports=function(e){var t=r.default.INITIAL_RETRY_DELAY_IF_RATE_LIMITED*Math.pow(2,e),n=Math.min(r.default.MAX_RETRY_DELAY_IF_RATE_LIMITED,t);return Math.random()*n}},{"./internal_config.json":10}],7:[function(e,t,n){"use strict";var r=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(e("node-fetch")),i="undefined"!=typeof window?window:"undefined"!=typeof self?self:null;t.exports=i?i.fetch.bind(i):r.default},{"node-fetch":20}],8:[function(e,t,n){"use strict";t.exports=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},{}],9:[function(e,t,n){"use strict";var r=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(e("lodash/keys")),i="undefined"!=typeof window,o=function(){function e(){this._headersByLowercasedKey={}}return e.prototype.set=function(e,t){var n=e.toLowerCase();"x-airtable-user-agent"===n&&(n="user-agent",e="User-Agent"),this._headersByLowercasedKey[n]={headerKey:e,headerValue:t}},e.prototype.toJSON=function(){for(var e={},t=0,n=r.default(this._headersByLowercasedKey);t<n.length;t++){var o=n[t],a=this._headersByLowercasedKey[o];e[i&&"user-agent"===o?"X-Airtable-User-Agent":a.headerKey]=a.headerValue}return e},e}();t.exports=o},{"lodash/keys":93}],10:[function(e,t,n){t.exports={INITIAL_RETRY_DELAY_IF_RATE_LIMITED:5e3,MAX_RETRY_DELAY_IF_RATE_LIMITED:6e5}},{}],11:[function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=r(e("lodash/isArray")),o=r(e("lodash/isNil")),a=r(e("lodash/keys"));function s(e,t,n){if(i.default(t))for(var r=0;r<t.length;r++){var o=t[r];/\[\]$/.test(e)?n(e,o):s(e+"["+("object"==typeof o&&null!==o?r:"")+"]",o,n)}else if("object"==typeof t)for(var l=0,c=a.default(t);l<c.length;l++){var u=c[l];s(e+"["+u+"]",o=t[u],n)}else n(e,t)}t.exports=function(e){for(var t=[],n=function(e,n){n=o.default(n)?"":n,t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=a.default(e);r<i.length;r++){var l=i[r];s(l,e[l],n)}return t.join("&").replace(/%20/g,"+")}},{"lodash/isArray":79,"lodash/isNil":85,"lodash/keys":93}],12:[function(e,t,n){"use strict";t.exports="0.12.2"},{}],13:[function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=i(e("lodash/isFunction")),a=i(e("lodash/keys")),s=i(e("./record")),l=i(e("./callback_to_promise")),c=i(e("./has")),u=e("./query_params"),d=i(e("./object_to_query_param_string")),h=function(){function e(e,t){this._table=e,this._params=t,this.firstPage=l.default(f,this),this.eachPage=l.default(p,this,1),this.all=l.default(m,this)}return e.validateParams=function(t){for(var n={},r=[],i=[],o=0,s=a.default(t);o<s.length;o++){var l=s[o],u=t[l];if(c.default(e.paramValidators,l)){var d=(0,e.paramValidators[l])(u);d.pass?n[l]=u:i.push(d.error)}else r.push(l)}return{validParams:n,ignoredKeys:r,errors:i}},e.paramValidators=u.paramValidators,e}();function f(e){if(!o.default(e))throw new Error("The first parameter to `firstPage` must be a function");this.eachPage((function(t){e(null,t)}),(function(t){e(t,null)}))}function p(e,t){var n=this;if(!o.default(e))throw new Error("The first parameter to `eachPage` must be a function");if(!o.default(t)&&void 0!==t)throw new Error("The second parameter to `eachPage` must be a function or undefined");var i,a,l=r({},this._params),c="/"+this._table._urlEncodedNameOrId()+"?"+d.default(l),h={},f=null;if("post"===l.method||c.length>u.URL_CHARACTER_LENGTH_LIMIT){f=l,i="post",a="/"+this._table._urlEncodedNameOrId()+"/listRecords";for(var p=0,m=Object.keys(l);p<m.length;p++){var _=m[p];u.shouldListRecordsParamBePassedAsParameter(_)?h[_]=l[_]:f[_]=l[_]}}else i="get",h=l,a="/"+this._table._urlEncodedNameOrId();var v=function(){n._table._base.runAction(i,a,h,f,(function(r,i,o){if(r)t(r,null);else{var a=void 0;o.offset?(l.offset=o.offset,a=v):a=function(){t(null)};var c=o.records.map((function(e){return new s.default(n._table,null,e)}));e(c,a)}}))};v()}function m(e){if(!o.default(e))throw new Error("The first parameter to `all` must be a function");var t=[];this.eachPage((function(e,n){t.push.apply(t,e),n()}),(function(n){n?e(n,null):e(null,t)}))}t.exports=h},{"./callback_to_promise":4,"./has":8,"./object_to_query_param_string":11,"./query_params":14,"./record":15,"lodash/isFunction":83,"lodash/keys":93}],14:[function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.shouldListRecordsParamBePassedAsParameter=n.URL_CHARACTER_LENGTH_LIMIT=n.paramValidators=void 0;var i=r(e("./typecheck")),o=r(e("lodash/isString")),a=r(e("lodash/isNumber")),s=r(e("lodash/isPlainObject")),l=r(e("lodash/isBoolean"));n.paramValidators={fields:i.default(i.default.isArrayOf(o.default),"the value for `fields` should be an array of strings"),filterByFormula:i.default(o.default,"the value for `filterByFormula` should be a string"),maxRecords:i.default(a.default,"the value for `maxRecords` should be a number"),pageSize:i.default(a.default,"the value for `pageSize` should be a number"),offset:i.default(a.default,"the value for `offset` should be a number"),sort:i.default(i.default.isArrayOf((function(e){return s.default(e)&&o.default(e.field)&&(void 0===e.direction||["asc","desc"].includes(e.direction))})),'the value for `sort` should be an array of sort objects. Each sort object must have a string `field` value, and an optional `direction` value that is "asc" or "desc".'),view:i.default(o.default,"the value for `view` should be a string"),cellFormat:i.default((function(e){return o.default(e)&&["json","string"].includes(e)}),'the value for `cellFormat` should be "json" or "string"'),timeZone:i.default(o.default,"the value for `timeZone` should be a string"),userLocale:i.default(o.default,"the value for `userLocale` should be a string"),method:i.default((function(e){return o.default(e)&&["get","post"].includes(e)}),'the value for `method` should be "get" or "post"'),returnFieldsByFieldId:i.default(l.default,"the value for `returnFieldsByFieldId` should be a boolean"),recordMetadata:i.default(i.default.isArrayOf(o.default),"the value for `recordMetadata` should be an array of strings")},n.URL_CHARACTER_LENGTH_LIMIT=15e3,n.shouldListRecordsParamBePassedAsParameter=function(e){return"timeZone"===e||"userLocale"===e}},{"./typecheck":18,"lodash/isBoolean":81,"lodash/isNumber":86,"lodash/isPlainObject":89,"lodash/isString":90}],15:[function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(e("./callback_to_promise")),o=function(){function e(e,t,n){this._table=e,this.id=t||n.id,n&&(this.commentCount=n.commentCount),this.setRawJson(n),this.save=i.default(a,this),this.patchUpdate=i.default(s,this),this.putUpdate=i.default(l,this),this.destroy=i.default(c,this),this.fetch=i.default(u,this),this.updateFields=this.patchUpdate,this.replaceFields=this.putUpdate}return e.prototype.getId=function(){return this.id},e.prototype.get=function(e){return this.fields[e]},e.prototype.set=function(e,t){this.fields[e]=t},e.prototype.setRawJson=function(e){this._rawJson=e,this.fields=this._rawJson&&this._rawJson.fields||{}},e}();function a(e){this.putUpdate(this.fields,e)}function s(e,t,n){var i=this;n||(n=t,t={});var o=r({fields:e},t);this._table._base.runAction("patch","/"+this._table._urlEncodedNameOrId()+"/"+this.id,{},o,(function(e,t,r){e?n(e):(i.setRawJson(r),n(null,i))}))}function l(e,t,n){var i=this;n||(n=t,t={});var o=r({fields:e},t);this._table._base.runAction("put","/"+this._table._urlEncodedNameOrId()+"/"+this.id,{},o,(function(e,t,r){e?n(e):(i.setRawJson(r),n(null,i))}))}function c(e){var t=this;this._table._base.runAction("delete","/"+this._table._urlEncodedNameOrId()+"/"+this.id,{},null,(function(n){n?e(n):e(null,t)}))}function u(e){var t=this;this._table._base.runAction("get","/"+this._table._urlEncodedNameOrId()+"/"+this.id,{},null,(function(n,r,i){n?e(n):(t.setRawJson(i),e(null,t))}))}t.exports=o},{"./callback_to_promise":4}],16:[function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=r(e("./exponential_backoff_with_jitter")),o=r(e("./object_to_query_param_string")),a=r(e("./package_version")),s=r(e("./fetch")),l=r(e("./abort-controller")),c="Airtable.js/"+a.default;t.exports=function e(t,n,r,a,u,d,h){var f=t._airtable._endpointUrl+"/v"+t._airtable._apiVersionMajor+"/"+t._id+r+"?"+o.default(a),p={authorization:"Bearer "+t._airtable._apiKey,"x-api-version":t._airtable._apiVersion,"x-airtable-application-id":t.getId(),"content-type":"application/json"};"undefined"!=typeof window?p["x-airtable-user-agent"]=c:p["User-Agent"]=c;var m=new l.default,_=n.toUpperCase(),v={method:_,headers:p,signal:m.signal};null!==u&&("GET"===_||"HEAD"===_?console.warn("body argument to runAction are ignored with GET or HEAD requests"):v.body=JSON.stringify(u));var g=setTimeout((function(){m.abort()}),t._airtable._requestTimeout);s.default(f,v).then((function(o){if(clearTimeout(g),429!==o.status||t._airtable._noRetryIfRateLimited)o.json().then((function(e){var n=t._checkStatusForError(o.status,e),r={};Object.keys(o).forEach((function(e){r[e]=o[e]})),r.body=e,r.statusCode=o.status,d(n,r,e)})).catch((function(){d(t._checkStatusForError(o.status))}));else{var s=i.default(h);setTimeout((function(){e(t,n,r,a,u,d,h+1)}),s)}})).catch((function(e){clearTimeout(g),d(e)}))}},{"./abort-controller":1,"./exponential_backoff_with_jitter":6,"./fetch":7,"./object_to_query_param_string":11,"./package_version":12}],17:[function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=i(e("lodash/isPlainObject")),a=i(e("./deprecate")),s=i(e("./query")),l=e("./query_params"),c=i(e("./object_to_query_param_string")),u=i(e("./record")),d=i(e("./callback_to_promise")),h=function(){function e(e,t,n){if(!t&&!n)throw new Error("Table name or table ID is required");this._base=e,this.id=t,this.name=n,this.find=d.default(this._findRecordById,this),this.select=this._selectRecords.bind(this),this.create=d.default(this._createRecords,this),this.update=d.default(this._updateRecords.bind(this,!1),this),this.replace=d.default(this._updateRecords.bind(this,!0),this),this.destroy=d.default(this._destroyRecord,this),this.list=a.default(this._listRecords.bind(this),"table.list","Airtable: `list()` is deprecated. Use `select()` instead."),this.forEach=a.default(this._forEachRecord.bind(this),"table.forEach","Airtable: `forEach()` is deprecated. Use `select()` instead.")}return e.prototype._findRecordById=function(e,t){new u.default(this,e).fetch(t)},e.prototype._selectRecords=function(e){if(void 0===e&&(e={}),arguments.length>1&&console.warn("Airtable: `select` takes only one parameter, but it was given "+arguments.length+" parameters. Use `eachPage` or `firstPage` to fetch records."),o.default(e)){var t=s.default.validateParams(e);if(t.errors.length){var n=t.errors.map((function(e){return"  * "+e}));throw new Error("Airtable: invalid parameters for `select`:\n"+n.join("\n"))}return t.ignoredKeys.length&&console.warn("Airtable: the following parameters to `select` will be ignored: "+t.ignoredKeys.join(", ")),new s.default(this,t.validParams)}throw new Error("Airtable: the parameter for `select` should be a plain object or undefined.")},e.prototype._urlEncodedNameOrId=function(){return this.id||encodeURIComponent(this.name)},e.prototype._createRecords=function(e,t,n){var i,o=this,a=Array.isArray(e);n||(n=t,t={}),i=r(a?{records:e}:{fields:e},t),this._base.runAction("post","/"+this._urlEncodedNameOrId()+"/",{},i,(function(e,t,r){var i;e?n(e):(i=a?r.records.map((function(e){return new u.default(o,e.id,e)})):new u.default(o,r.id,r),n(null,i))}))},e.prototype._updateRecords=function(e,t,n,i,a){var s,l=this;if(Array.isArray(t)){var c=t;s=o.default(n)?n:{},a=i||n;var d=e?"put":"patch",h=r({records:c},s);this._base.runAction(d,"/"+this._urlEncodedNameOrId()+"/",{},h,(function(e,t,n){if(e)a(e);else{var r=n.records.map((function(e){return new u.default(l,e.id,e)}));a(null,r)}}))}else{var f=t,p=n;s=o.default(i)?i:{},a=a||i;var m=new u.default(this,f);e?m.putUpdate(p,s,a):m.patchUpdate(p,s,a)}},e.prototype._destroyRecord=function(e,t){var n=this;if(Array.isArray(e)){var r={records:e};this._base.runAction("delete","/"+this._urlEncodedNameOrId(),r,null,(function(e,r,i){if(e)t(e);else{var o=i.records.map((function(e){var t=e.id;return new u.default(n,t,null)}));t(null,o)}}))}else new u.default(this,e).destroy(t)},e.prototype._listRecords=function(e,t,n,i){var o=this;i||(i=n,n={});var a,s,d="/"+this._urlEncodedNameOrId()+"?"+c.default(n),h={},f=null;if("function"!=typeof n&&"post"===n.method||d.length>l.URL_CHARACTER_LENGTH_LIMIT){a="/"+this._urlEncodedNameOrId()+"/listRecords",f=r(r({},e&&{pageSize:e}),t&&{offset:t}),s="post";for(var p=0,m=Object.keys(n);p<m.length;p++){var _=m[p];l.shouldListRecordsParamBePassedAsParameter(_)?h[_]=n[_]:f[_]=n[_]}}else s="get",a="/"+this._urlEncodedNameOrId()+"/",h=r({limit:e,offset:t},n);this._base.runAction(s,a,h,f,(function(e,t,n){if(e)i(e);else{var r=n.records.map((function(e){return new u.default(o,null,e)}));i(null,r,n.offset)}}))},e.prototype._forEachRecord=function(t,n,r){var i=this;2===arguments.length&&(r=n,n=t,t={});var o=e.__recordsPerPageForIteration||100,a=null,s=function(){i._listRecords(o,a,t,(function(e,t,i){if(e)r(e);else{for(var o=0;o<t.length;o++)n(t[o]);i?(a=i,s()):r()}}))};s()},e}();t.exports=h},{"./callback_to_promise":4,"./deprecate":5,"./object_to_query_param_string":11,"./query":13,"./query_params":14,"./record":15,"lodash/isPlainObject":89}],18:[function(e,t,n){"use strict";function r(e,t){return function(n){return e(n)?{pass:!0}:{pass:!1,error:t}}}r.isOneOf=function(e){return e.includes.bind(e)},r.isArrayOf=function(e){return function(t){return Array.isArray(t)&&t.every(e)}},t.exports=r},{}],19:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t,n){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}},c(e,t,n||e)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(){r(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return o(e,[{key:"addEventListener",value:function(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var n=this.listeners[e],r=0,i=n.length;r<i;r++)if(n[r]===t)return void n.splice(r,1)}},{key:"dispatchEvent",value:function(e){var t=this;if(e.type in this.listeners){for(var n=function(n){setTimeout((function(){return n.call(t,e)}))},r=this.listeners[e.type],i=0,o=r.length;i<o;i++)n(r[i]);return!e.defaultPrevented}}}]),e}(),d=function(e){function t(){var e;return r(this,t),(e=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?l(e):t}(this,a(t).call(this))).listeners||u.call(l(e)),Object.defineProperty(l(e),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(l(e),"onabort",{value:null,writable:!0,configurable:!0}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),o(t,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),c(a(t.prototype),"dispatchEvent",this).call(this,e)}}]),t}(u),h=function(){function e(){r(this,e),Object.defineProperty(this,"signal",{value:new d,writable:!0,configurable:!0})}return o(e,[{key:"abort",value:function(){var e;try{e=new Event("abort")}catch(t){"undefined"!=typeof document?document.createEvent?(e=document.createEvent("Event")).initEvent("abort",!1,!1):(e=document.createEventObject()).type="abort":e={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(e)}},{key:"toString",value:function(){return"[object AbortController]"}}]),e}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(h.prototype[Symbol.toStringTag]="AbortController",d.prototype[Symbol.toStringTag]="AbortSignal"),n.AbortController=h,n.AbortSignal=d,n.abortableFetch=function(e){"function"==typeof e&&(e={fetch:e});var t=e,n=t.fetch,r=t.Request,i=void 0===r?n.Request:r,o=t.AbortController,a=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,s=void 0!==a&&a;if(!function(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}({fetch:n,Request:i,AbortController:o,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:s}))return{fetch:n,Request:l};var l=i;(l&&!l.prototype.hasOwnProperty("signal")||s)&&((l=function(e,t){var n;t&&t.signal&&(n=t.signal,delete t.signal);var r=new i(e,t);return n&&Object.defineProperty(r,"signal",{writable:!1,enumerable:!1,configurable:!0,value:n}),r}).prototype=i.prototype);var c=n;return{fetch:function(e,t){var n=l&&l.prototype.isPrototypeOf(e)?e.signal:t?t.signal:void 0;if(n){var r;try{r=new DOMException("Aborted","AbortError")}catch(e){(r=new Error("Aborted")).name="AbortError"}if(n.aborted)return Promise.reject(r);var i=new Promise((function(e,t){n.addEventListener("abort",(function(){return t(r)}),{once:!0})}));return t&&t.signal&&delete t.signal,Promise.race([i,c(e,t)])}return c(e,t)},Request:l}}},{}],20:[function(e,t,n){},{}],21:[function(e,t,n){var r=e("./_hashClear"),i=e("./_hashDelete"),o=e("./_hashGet"),a=e("./_hashHas"),s=e("./_hashSet");function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},{"./_hashClear":46,"./_hashDelete":47,"./_hashGet":48,"./_hashHas":49,"./_hashSet":50}],22:[function(e,t,n){var r=e("./_listCacheClear"),i=e("./_listCacheDelete"),o=e("./_listCacheGet"),a=e("./_listCacheHas"),s=e("./_listCacheSet");function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},{"./_listCacheClear":56,"./_listCacheDelete":57,"./_listCacheGet":58,"./_listCacheHas":59,"./_listCacheSet":60}],23:[function(e,t,n){var r=e("./_getNative")(e("./_root"),"Map");t.exports=r},{"./_getNative":42,"./_root":72}],24:[function(e,t,n){var r=e("./_mapCacheClear"),i=e("./_mapCacheDelete"),o=e("./_mapCacheGet"),a=e("./_mapCacheHas"),s=e("./_mapCacheSet");function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},{"./_mapCacheClear":61,"./_mapCacheDelete":62,"./_mapCacheGet":63,"./_mapCacheHas":64,"./_mapCacheSet":65}],25:[function(e,t,n){var r=e("./_root").Symbol;t.exports=r},{"./_root":72}],26:[function(e,t,n){var r=e("./_baseTimes"),i=e("./isArguments"),o=e("./isArray"),a=e("./isBuffer"),s=e("./_isIndex"),l=e("./isTypedArray"),c=Object.prototype.hasOwnProperty;t.exports=function(e,t){var n=o(e),u=!n&&i(e),d=!n&&!u&&a(e),h=!n&&!u&&!d&&l(e),f=n||u||d||h,p=f?r(e.length,String):[],m=p.length;for(var _ in e)!t&&!c.call(e,_)||f&&("length"==_||d&&("offset"==_||"parent"==_)||h&&("buffer"==_||"byteLength"==_||"byteOffset"==_)||s(_,m))||p.push(_);return p}},{"./_baseTimes":35,"./_isIndex":51,"./isArguments":78,"./isArray":79,"./isBuffer":82,"./isTypedArray":92}],27:[function(e,t,n){t.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},{}],28:[function(e,t,n){var r=e("./eq");t.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},{"./eq":76}],29:[function(e,t,n){var r=e("./_castPath"),i=e("./_toKey");t.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},{"./_castPath":38,"./_toKey":74}],30:[function(e,t,n){var r=e("./_Symbol"),i=e("./_getRawTag"),o=e("./_objectToString"),a=r?r.toStringTag:void 0;t.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},{"./_Symbol":25,"./_getRawTag":44,"./_objectToString":70}],31:[function(e,t,n){var r=e("./_baseGetTag"),i=e("./isObjectLike");t.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},{"./_baseGetTag":30,"./isObjectLike":88}],32:[function(e,t,n){var r=e("./isFunction"),i=e("./_isMasked"),o=e("./isObject"),a=e("./_toSource"),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,h=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(e){return!(!o(e)||i(e))&&(r(e)?h:s).test(a(e))}},{"./_isMasked":54,"./_toSource":75,"./isFunction":83,"./isObject":87}],33:[function(e,t,n){var r=e("./_baseGetTag"),i=e("./isLength"),o=e("./isObjectLike"),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},{"./_baseGetTag":30,"./isLength":84,"./isObjectLike":88}],34:[function(e,t,n){var r=e("./_isPrototype"),i=e("./_nativeKeys"),o=Object.prototype.hasOwnProperty;t.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},{"./_isPrototype":55,"./_nativeKeys":68}],35:[function(e,t,n){t.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},{}],36:[function(e,t,n){var r=e("./_Symbol"),i=e("./_arrayMap"),o=e("./isArray"),a=e("./isSymbol"),s=r?r.prototype:void 0,l=s?s.toString:void 0;t.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},{"./_Symbol":25,"./_arrayMap":27,"./isArray":79,"./isSymbol":91}],37:[function(e,t,n){t.exports=function(e){return function(t){return e(t)}}},{}],38:[function(e,t,n){var r=e("./isArray"),i=e("./_isKey"),o=e("./_stringToPath"),a=e("./toString");t.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},{"./_isKey":52,"./_stringToPath":73,"./isArray":79,"./toString":96}],39:[function(e,t,n){var r=e("./_root")["__core-js_shared__"];t.exports=r},{"./_root":72}],40:[function(e,t,r){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],41:[function(e,t,n){var r=e("./_isKeyable");t.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},{"./_isKeyable":53}],42:[function(e,t,n){var r=e("./_baseIsNative"),i=e("./_getValue");t.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},{"./_baseIsNative":32,"./_getValue":45}],43:[function(e,t,n){var r=e("./_overArg")(Object.getPrototypeOf,Object);t.exports=r},{"./_overArg":71}],44:[function(e,t,n){var r=e("./_Symbol"),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},{"./_Symbol":25}],45:[function(e,t,n){t.exports=function(e,t){return null==e?void 0:e[t]}},{}],46:[function(e,t,n){var r=e("./_nativeCreate");t.exports=function(){this.__data__=r?r(null):{},this.size=0}},{"./_nativeCreate":67}],47:[function(e,t,n){t.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},{}],48:[function(e,t,n){var r=e("./_nativeCreate"),i=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},{"./_nativeCreate":67}],49:[function(e,t,n){var r=e("./_nativeCreate"),i=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},{"./_nativeCreate":67}],50:[function(e,t,n){var r=e("./_nativeCreate");t.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},{"./_nativeCreate":67}],51:[function(e,t,n){var r=/^(?:0|[1-9]\d*)$/;t.exports=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}},{}],52:[function(e,t,n){var r=e("./isArray"),i=e("./isSymbol"),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||a.test(e)||!o.test(e)||null!=t&&e in Object(t)}},{"./isArray":79,"./isSymbol":91}],53:[function(e,t,n){t.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},{}],54:[function(e,t,n){var r,i=e("./_coreJsData"),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(e){return!!o&&o in e}},{"./_coreJsData":39}],55:[function(e,t,n){var r=Object.prototype;t.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},{}],56:[function(e,t,n){t.exports=function(){this.__data__=[],this.size=0}},{}],57:[function(e,t,n){var r=e("./_assocIndexOf"),i=Array.prototype.splice;t.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},{"./_assocIndexOf":28}],58:[function(e,t,n){var r=e("./_assocIndexOf");t.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},{"./_assocIndexOf":28}],59:[function(e,t,n){var r=e("./_assocIndexOf");t.exports=function(e){return r(this.__data__,e)>-1}},{"./_assocIndexOf":28}],60:[function(e,t,n){var r=e("./_assocIndexOf");t.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},{"./_assocIndexOf":28}],61:[function(e,t,n){var r=e("./_Hash"),i=e("./_ListCache"),o=e("./_Map");t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},{"./_Hash":21,"./_ListCache":22,"./_Map":23}],62:[function(e,t,n){var r=e("./_getMapData");t.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},{"./_getMapData":41}],63:[function(e,t,n){var r=e("./_getMapData");t.exports=function(e){return r(this,e).get(e)}},{"./_getMapData":41}],64:[function(e,t,n){var r=e("./_getMapData");t.exports=function(e){return r(this,e).has(e)}},{"./_getMapData":41}],65:[function(e,t,n){var r=e("./_getMapData");t.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},{"./_getMapData":41}],66:[function(e,t,n){var r=e("./memoize");t.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},{"./memoize":94}],67:[function(e,t,n){var r=e("./_getNative")(Object,"create");t.exports=r},{"./_getNative":42}],68:[function(e,t,n){var r=e("./_overArg")(Object.keys,Object);t.exports=r},{"./_overArg":71}],69:[function(e,t,n){var r=e("./_freeGlobal"),i="object"==typeof n&&n&&!n.nodeType&&n,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();t.exports=s},{"./_freeGlobal":40}],70:[function(e,t,n){var r=Object.prototype.toString;t.exports=function(e){return r.call(e)}},{}],71:[function(e,t,n){t.exports=function(e,t){return function(n){return e(t(n))}}},{}],72:[function(e,t,n){var r=e("./_freeGlobal"),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},{"./_freeGlobal":40}],73:[function(e,t,n){var r=e("./_memoizeCapped"),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));t.exports=a},{"./_memoizeCapped":66}],74:[function(e,t,n){var r=e("./isSymbol");t.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},{"./isSymbol":91}],75:[function(e,t,n){var r=Function.prototype.toString;t.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},{}],76:[function(e,t,n){t.exports=function(e,t){return e===t||e!=e&&t!=t}},{}],77:[function(e,t,n){var r=e("./_baseGet");t.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},{"./_baseGet":29}],78:[function(e,t,n){var r=e("./_baseIsArguments"),i=e("./isObjectLike"),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};t.exports=l},{"./_baseIsArguments":31,"./isObjectLike":88}],79:[function(e,t,n){var r=Array.isArray;t.exports=r},{}],80:[function(e,t,n){var r=e("./isFunction"),i=e("./isLength");t.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},{"./isFunction":83,"./isLength":84}],81:[function(e,t,n){var r=e("./_baseGetTag"),i=e("./isObjectLike");t.exports=function(e){return!0===e||!1===e||i(e)&&"[object Boolean]"==r(e)}},{"./_baseGetTag":30,"./isObjectLike":88}],82:[function(e,t,n){var r=e("./_root"),i=e("./stubFalse"),o="object"==typeof n&&n&&!n.nodeType&&n,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;t.exports=l},{"./_root":72,"./stubFalse":95}],83:[function(e,t,n){var r=e("./_baseGetTag"),i=e("./isObject");t.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},{"./_baseGetTag":30,"./isObject":87}],84:[function(e,t,n){t.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},{}],85:[function(e,t,n){t.exports=function(e){return null==e}},{}],86:[function(e,t,n){var r=e("./_baseGetTag"),i=e("./isObjectLike");t.exports=function(e){return"number"==typeof e||i(e)&&"[object Number]"==r(e)}},{"./_baseGetTag":30,"./isObjectLike":88}],87:[function(e,t,n){t.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},{}],88:[function(e,t,n){t.exports=function(e){return null!=e&&"object"==typeof e}},{}],89:[function(e,t,n){var r=e("./_baseGetTag"),i=e("./_getPrototype"),o=e("./isObjectLike"),a=Function.prototype,s=Object.prototype,l=a.toString,c=s.hasOwnProperty,u=l.call(Object);t.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}},{"./_baseGetTag":30,"./_getPrototype":43,"./isObjectLike":88}],90:[function(e,t,n){var r=e("./_baseGetTag"),i=e("./isArray"),o=e("./isObjectLike");t.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&"[object String]"==r(e)}},{"./_baseGetTag":30,"./isArray":79,"./isObjectLike":88}],91:[function(e,t,n){var r=e("./_baseGetTag"),i=e("./isObjectLike");t.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},{"./_baseGetTag":30,"./isObjectLike":88}],92:[function(e,t,n){var r=e("./_baseIsTypedArray"),i=e("./_baseUnary"),o=e("./_nodeUtil"),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},{"./_baseIsTypedArray":33,"./_baseUnary":37,"./_nodeUtil":69}],93:[function(e,t,n){var r=e("./_arrayLikeKeys"),i=e("./_baseKeys"),o=e("./isArrayLike");t.exports=function(e){return o(e)?r(e):i(e)}},{"./_arrayLikeKeys":26,"./_baseKeys":34,"./isArrayLike":80}],94:[function(e,t,n){var r=e("./_MapCache");function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},{"./_MapCache":24}],95:[function(e,t,n){t.exports=function(){return!1}},{}],96:[function(e,t,n){var r=e("./_baseToString");t.exports=function(e){return null==e?"":r(e)}},{"./_baseToString":36}],airtable:[function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=r(e("./base")),o=r(e("./record")),a=r(e("./table")),s=r(e("./airtable_error")),l=function(){function e(t){void 0===t&&(t={});var n=e.default_config(),r=t.apiVersion||e.apiVersion||n.apiVersion;if(Object.defineProperties(this,{_apiKey:{value:t.apiKey||e.apiKey||n.apiKey},_apiVersion:{value:r},_apiVersionMajor:{value:r.split(".")[0]},_customHeaders:{value:t.customHeaders||{}},_endpointUrl:{value:t.endpointUrl||e.endpointUrl||n.endpointUrl},_noRetryIfRateLimited:{value:t.noRetryIfRateLimited||e.noRetryIfRateLimited||n.noRetryIfRateLimited},_requestTimeout:{value:t.requestTimeout||e.requestTimeout||n.requestTimeout}}),!this._apiKey)throw new Error("An API key is required to connect to Airtable")}return e.prototype.base=function(e){return i.default.createFunctor(this,e)},e.default_config=function(){return{endpointUrl:"https://api.airtable.com",apiVersion:"0.1.0",apiKey:"",noRetryIfRateLimited:!1,requestTimeout:3e5}},e.configure=function(t){var n=t.apiKey,r=t.endpointUrl,i=t.apiVersion,o=t.noRetryIfRateLimited,a=t.requestTimeout;e.apiKey=n,e.endpointUrl=r,e.apiVersion=i,e.noRetryIfRateLimited=o,e.requestTimeout=a},e.base=function(t){return(new e).base(t)},e.Base=i.default,e.Record=o.default,e.Table=a.default,e.Error=s.default,e}();t.exports=l},{"./airtable_error":2,"./base":3,"./record":15,"./table":17}]},{},["airtable"])("airtable")}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=(e,t,n)=>{const r=n.currentTarget;return"true"===r.dataset.timeToValidate?(r.dispatchEvent(new Event("form-ended")),-1):++e>=t?t:e},t=(e,t,n)=>(--e<1&&(e=1),e),r=(()=>{class e extends HTMLElement{constructor({activeSegmentClass:e,validSegmentClass:t,invalidSegmentClass:n,segmentClass:r,onSegmentClick:i,getSegmentCount:o}){super(),this._activeSegmentClass=e,this._validSegmentClass=t,this._invalidSegmentClass=n,this._segmentClass=r,this._onSegmentClick=i,this._getSegmentCount=o,this._activeSegmentRef=null}render(){this.style.maxWidth="100%",this.style.display="flex",this.style.flexDirection="row",this.style.gap="1rem";const e=parseInt(this._getSegmentCount()||0);for(let t=0;t<e;t++){const e=this.createSegment();this.appendChild(e)}this.selectSegment(0)}createSegment(){const e=document.createElement("span");return e.classList.add(this._segmentClass),e.classList.add(this._invalidSegmentClass),this._onSegmentClick&&e.addEventListener("click",this._onSegmentClick),e}selectSegment(e){this._activeSegmentRef&&this._activeSegmentRef.classList.remove(this._activeSegmentClass);const t=this.children.item(e);t.classList.add(this._activeSegmentClass),this._activeSegmentRef=t}setValidSegment(e){this.children.item(e).classList.remove(this._invalidSegmentClass),this.children.item(e).classList.add(this._validSegmentClass)}setInvalidSegment(e){this.children.item(e).classList.remove(this._validSegmentClass),this.children.item(e).classList.add(this._invalidSegmentClass)}insertSegmentAt(e){let t=e-1;t<0&&(t=0),this.children.item(t).after(this.createSegment())}deleteSegmentAt(e){this.children.item(e).remove()}connectedCallback(){this.render()}}customElements.define("progress-bar",e);let t=null;return{init:n=>{t=new e(n),document.getElementById(n.container).appendChild(t)},deleteSegmentAt:e=>{t.deleteSegmentAt(e)},createSegmentAt:e=>{t.insertSegmentAt(e)},selectSegment:e=>{t.selectSegment(e)},segmentIsValid:e=>{t.setValidSegment(e)},segmentIsNotValid:e=>{t.setInvalidSegment(e)}}})(),i=r,o=(()=>{let e;return{init:t=>{e=t},save:(t,n)=>{if(!e)throw new Error("Store must be initialized before first use.");localStorage.setItem(e+t,n)},get:t=>{if(!e)throw new Error("Store must be initialized before first use.");return localStorage.getItem(e+t)},clear:()=>{if(!e)throw new Error("Store must be initialized before first use.");const t=Object.keys(localStorage);for(const n of t)n.startsWith(e)&&localStorage.removeItem(n)},getContractName:()=>e}})(),a=e=>null==e.value?e.getAttribute("value"):e.value,s=e=>{const t=document.getElementById(`page_${e}`).querySelectorAll('[data-validate="true"]');let n=JSON.parse(o.get("report"))||[];for(const r of t){const t=a(r);if(null==t||""==t||"none"==t)return n.includes(e)||n.push(e),o.save("report",JSON.stringify(n)),!1}const r=n.indexOf(e);return-1!=r&&(n.splice(r,1),o.save("report",JSON.stringify(n))),!0},l=e=>{const t=document.getElementById("next_button");return n=>{let r=d(),o=h();c(r),s(r)?i.segmentIsValid(r-1):i.segmentIsNotValid(r-1);const a=e(r,o,n);a<0||(a===o?(t.querySelector("span").innerText="VALIDER LE CONTRAT",t.setAttribute("data-time-to-validate",!0)):(t.querySelector("span").innerText="SUIVANT",t.setAttribute("data-time-to-validate",!1)),i.selectSegment(a-1),u(a))}},c=e=>{document.getElementById(`page_${e}`).hidden=!0},u=e=>{const t=document.getElementById(`page_${e}`);t.hidden=!1,document.getElementById("page_number").setAttribute("value",e),document.getElementById("page-title").innerText=t.getAttribute("data-page-title")},d=()=>{const e=document.getElementById("page_number");return parseInt(e.value)},h=()=>{const e=document.getElementById("page_number_total");return parseInt(e.value)},f=(e,t)=>(null==t?e:`${e.trim()}_${t}`).trim(),p=(e,t)=>{var n=[];let r=t.exec(e);for(;null!==r;)r.index===t.lastIndex&&t.lastIndex++,r.forEach((e=>{n.push(e)})),r=t.exec(e);return n},m=/{{#for\s{1}(.*)}}/g,_=(e,t,n,r)=>{const i=p(t,m);if(!i||2!=i.length)return console.error("can't get for tag whereas is should be present."),{};const o=i[0],s=i[1],l=crypto.randomUUID(),c=f(`div_${s}_${l}`,r),u=n+1;let d=u;const h=[];for(;!e[d].includes("{{/for}}")||d===e.length;)h.push(e[d]),d++;const _=document.getElementById(s);_.addEventListener("input",(()=>{const e=a(_),t=document.getElementById(c);let n=t.childElementCount-parseInt(e);for(;n>0;)t.removeChild(t.lastChild),n--;let r=t.childElementCount>0?t.childElementCount:0;for(;r<e;r++){const e=S(h.slice(),r),n=document.createElement("div");n.innerHTML=e.join(""),t.appendChild(n)}}));const v=t.replace(o,`<div id=${c}>`);return e[n]=v,e.splice(u,h.length),{newTextLines:e,newIndex:u-1}},v=/{{#if\s{1}(.*)}}/g,g=/^(eq|neq)\s+(.*)\s+"([^"]+)"$/gm,b="&",y=(e,t)=>{const n=p(e,v);if(!n||2!=n.length)return console.error("no match found for line",e),"";const r=p(n[1],g);if(!r||4!=r.length)return console.error("can't get condition parameters for",n[1],"b"),"";const i=r[1],o=f(r[2],t),a=r[3];let s="none",l=[];a.includes("|")?(l=a.split("|"),s="|"):a.includes(b)?(l=a.split(b),s=b):l=[a];const c=crypto.randomUUID(),u=f(`div_${c}_${o}`,t),d=document.getElementById(o);return d.addEventListener("input",(()=>{E(d,u,l,i,s)})),e.replace(v,(e=>`<div id="${u}" style="display:none;">`))},E=(e,t,n,r,i)=>{const o=document.getElementById(t),s=a(e);w(o,s,n,r),i===b&&C(o,s,n,r)},w=(e,t,n,r)=>{for(let i=0;i<n.length;i++){const o=n[i];if(A(t,o,r))return void(e.style.display="block")}e.style.display="none"},C=(e,t,n,r)=>{for(let i=0;i<n.length;i++){const o=n[i];if(!A(t,o,r))return void(e.style.display="none")}e.style.display="block"},A=(e,t,n)=>{switch(n){case"eq":return e==t;case"neq":return e!=t}},x=/{{#array\s{1}(.*)}}/g,I=(e,t)=>{const n=p(e,x);if(!n||2!=n.length)return console.error("can't get array tag whereas is should be present."),{};const r=f(n[1],t),i=document.getElementById(r);i.addEventListener("newRow",(()=>{L(i,r,t)})),i.addEventListener("rowDeleted",(()=>{L(i,r,t)}));const o=i.totalInputRef;return o.addEventListener("input",(()=>{const e=document.getElementById(`preview_${o.id}`);null!=e.firstChild&&e.removeChild(e.firstChild);const t=document.createElement("p");t.innerText=`Total: ${a(o)}`,e.appendChild(t)})),`<div id="div_${r}"><table id="table_${r}"></table><div id="preview_${o.id}"></div></div>`},L=(e,t,n)=>{const r=document.getElementById(`div_${t}`),i=document.getElementById(`table_${t}`),o=document.createElement("table");o.id=`table_${t}`,r.replaceChild(o,i);const a=document.createElement("thead"),s=document.createElement("tr");o.appendChild(a),a.appendChild(s),e.columns.forEach((e=>{const t=document.createElement("th"),n=document.createElement("p"),r=document.createElement("strong");r.innerText=e.label,n.appendChild(r),t.appendChild(n),s.appendChild(t)}));const l=document.createElement("tbody");e.activeRows.forEach((e=>{const t=document.createElement("tr");e.forEach((e=>{const n=document.createElement("td"),r=document.getElementById(e);r.addEventListener("input",(()=>{O(n,r)})),O(n,r),t.appendChild(n)})),l.appendChild(t)})),o.appendChild(l)},O=(e,t)=>{const n=document.createElement("p");n.innerText=a(t),null!=e.firstChild?e.replaceChild(n,e.firstChild):e.appendChild(n)},R=(e,t)=>{const n=parseInt(794/t);return parseInt(e/n)},T=/{{(?![#\/])([^{}]+)}}/g,S=(e,t)=>{for(let n=0;n<e.length;n++){const r=e[n];let i="";if(r.includes("{{#if")){if(i=y(r,t),""===i){console.error("Error occured during conditionnal tag replacement.");continue}e[n]=i}else if(r.includes("{{/if}}"))i="</div>",e[n]=i;else if(r.includes("{{#for")){const{newTextLines:i,newIndex:o}=_(e.slice(),r,n,t);e=i,n=o}else if(r.includes("{{/for}}"))i="</div>",e[n]=i;else if(r.includes("{{#array"))i=I(r,t),e[n]=i;else if(r.includes("{{#today}}")){const t=new Date;i=r.replace("{{#today}}",t.toLocaleDateString()),e[n]=i}else i=r.replace(T,((e,n)=>{const r=f(n,t);let i=`span_${r}_${crypto.randomUUID()}`;const o=document.getElementById(r),s=()=>{const e=document.getElementById(i),t=a(o);e.innerText=t,""===t?e.classList.add("to_fill"):e.classList.remove("to_fill")};let l;try{l=a(o)||""}catch(e){l=""}return o.addEventListener("input",s),o.addEventListener("change",s),`<span id="${i}">${l}</span>`})),e[n]=i}return e},j=(e,t)=>{const n=document.createElement("div");return n.id=`container_${e}`,null!=t&&n.classList.add(...t),n},k=(e,t,n,r,i)=>{var o=document.createElement("input");return o.type=e,o.name=t,o.id=n,o.value=r,"radio"!==e&&o.classList.add("form-input"),void 0===i||(null!=i.min&&o.addEventListener("change",P(i.min)),null!=i.max&&o.addEventListener("change",N(i.max)),null!=i.case&&o.addEventListener("change",M(i.case)),null!=i.number_format&&o.addEventListener("change",B(i.number_format))),o},P=e=>t=>{const n=t.target;parseInt(n.value)<e&&(n.value=e)},N=e=>t=>{const n=t.target;parseInt(n.value)>e&&(n.value=e)},M=e=>{switch(e){case"Uppercase":return e=>{const t=e.target;t.value=t.value.toUpperCase()};case"FirstLetterUppercase":return e=>{const t=e.target;t.value=t.value?t.value[0].toUpperCase()+t.value.slice(1):""};default:return()=>{}}},B=e=>{switch(e){case"decimal":return e=>{const t=e.target,n=parseFloat(t.value);n&&(t.value=n)};case"integer":return e=>{const t=e.target,n=parseInt(t.value);n&&(t.value=n)};default:return}},q=(e,t,n)=>{const r=document.createElement("div");r.classList.add("input-label-container");const i=document.createElement("label");return i.classList.add("form-label"),i.htmlFor=e,i.innerText=t,r.appendChild(i),n?(r.appendChild(D(n)),r):r},D=e=>{const t=document.createElement("span");t.innerText="i";const n=document.createElement("span");return n.innerText=e,n.classList.add("input-description"),t.appendChild(n),t},F=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)};class U extends HTMLElement{constructor(){super(),this._choices=[],this._label="",this._value="none",this._radios=[],this._radioNoneRef=null,this._rendered=!1}render(){F(this);const e=this._value||o.get(this.id);e&&this.setAttribute("value",e),[this.label(),this.radios()].forEach((e=>{this.appendChild(e)})),this._rendered||document.addEventListener("contract-generated",(()=>{this.dispatchEvent(new Event("input")),this.dispatchEvent(new Event("change"))})),this._rendered=!0}label(){const e=document.createElement("legend");return e.innerText=this._label,e.classList.add("form-label"),e}radios(){let e=!0;const t=document.createElement("div");return this._choices.forEach((n=>{const r=document.createElement("div");r.classList.add("radio-row");const i=`radio_${this.id}`,a=`${i}_${n}`,s=this.radio(i,a,n);n===o.get(this.id)&&(s.checked=!0,this.setAttribute("value",s.value),e=!1);const l=q(a,n);this._radios.push(s),r.appendChild(s),r.appendChild(l),t.appendChild(r)})),t.appendChild(this.radioNone(e)),t}radio(e,t,n){const r=k("radio",e,t,n);return r.addEventListener("click",(()=>{r.checked&&(this._value=r.value,this.setAttribute("value",this._value),o.save(this.id,this._value),r.dispatchEvent(new Event("input")))})),r}radioNone(e){const t=k("radio",`radio_${this.id}`,`${this.id}_none`,"none");return t.checked=e,t.style.display="none",this._radioNoneRef=t,t}uncheckAll(){this._radios.forEach((e=>{e.checked=!1})),this._radioNoneRef.checked=!1}connectedCallback(){this.render()}static get observedAttributes(){return["label","choices"]}attributeChangedCallback(e,t,n){switch(e){case"label":this._label=n;break;case"choices":this._choices=JSON.parse(n)}this.render()}}customElements.define("radio-group",U);class $ extends U{constructor(){super(),this._placeholder=null,this._format=null,this._inputReference={}}render(){super.render(),this.appendChild(this.input()),this._radios.forEach((e=>{e.addEventListener("click",(()=>{this._inputReference.value="",this.dispatchEvent(new Event("input"))}))}))}input(){let e=null;this.valueIsFromRadio(o.get(this.id))||(e=o.get(this.id),this.uncheckAll(),e&&this.setAttribute("value",e));const t=k(this._format,this.id,this.id,e);return t.placeholder=this._placeholder,t.addEventListener("input",(()=>{this.uncheckAll(),this._value=t.value,this.setAttribute("value",this._value),o.save(this.id,this._value),this.dispatchEvent(new Event("input"))})),this._inputReference=t,t}valueIsFromRadio=e=>this._choices.includes(e)&&"none"!=e;static get observedAttributes(){return["placeholder","format",...super.observedAttributes]}attributeChangedCallback(e,t,n){switch(super.attributeChangedCallback(e,t,n),e){case"placeholder":this._placeholder=n;break;case"format":this._format=n}this.render()}}customElements.define("radio-with-other",$);const z=(e,t)=>{const n=document.createElement("select");return n.id=e,n.name=e,t.forEach((e=>{const t=document.createElement("option");t.innerText=e,t.value=e,n.appendChild(t)})),n},H=(e,t,n)=>{const r=f(e.id,t),i=k(e.schema.format,r,r,o.get(r),e.schema.rules);i.required=e.required,i.setAttribute("data-validate",n||!1),i.addEventListener("change",(()=>{o.save(r,i.value)}));const a=q(r,e.label,e.description);var s=j(r,["input-container"]);return s.appendChild(a),s.appendChild(i),document.addEventListener("contract-generated",(()=>{i.dispatchEvent(new Event("input")),i.dispatchEvent(new Event("change"))})),s};class V extends HTMLElement{constructor(){super(),this._choices=[],this._label="",this._description=null,this._placeholder=null,this._format=null,this._inputRules={},this._inputReference={},this._selectReference={}}render(){F(this),this.setAttribute("value",this._value||o.get(this.id));const e=[this.select(),this.input()],t=q(this._selectReference.id,this._label,this._description);this.appendChild(t),e.forEach((e=>{this.appendChild(e)})),this.addSelectEventListener(),this.addInputEventListener(),document.addEventListener("contract-generated",(()=>{this.dispatchEvent(new Event("input")),this.dispatchEvent(new Event("change"))}))}select(){const e=`select_${this.id}`,t=z(e,this._choices);return this._selectReference=t,t}input(){const e=`other_input_${this.id}`,t=k(this._format,e,e,null,this._inputRules);return t.placeholder=this._placeholder,this._inputReference=t,t}addSelectEventListener(){if(!this.elementsAreDefined())throw new Error("input or select must be defined before attaching select listener");this._selectReference.addEventListener("change",(()=>{this._inputReference.value="",this.setAttribute("value",this._selectReference.value),o.save(this.id,this._selectReference.value),this.dispatchEvent(new Event("input"))}))}addInputEventListener(){if(!this.elementsAreDefined())throw new Error("input or select must be defined before attaching input listener");this._inputReference.addEventListener("input",(()=>{this._selectReference.value=this._selectReference.options[0].value,this._selectReference.options[0].selected=!0,this.setAttribute("value",this._inputReference.value),this.dispatchEvent(new Event("input"))})),this._inputReference.addEventListener("change",(()=>{null!=this._inputReference.value&&o.save(this.id,this._inputReference.value)}))}elementsAreDefined(){return null!=this._inputReference&&null!=this._selectReference}static get observedAttributes(){return["choices","placeholder","format","input_rules","label"]}attributeChangedCallback(e,t,n){switch(e){case"choices":this._choices=JSON.parse(n);break;case"placeholder":this._placeholder=n;break;case"format":this._format=n;break;case"input_rules":this._inputRules=JSON.parse(n);break;case"label":this._label=n;break;case"description":this._description=n}this.render()}}customElements.define("select-with-other",V);class G extends HTMLElement{constructor(){super(),this._conditions=[],this._items=[],this._suffix}render(){F(this),this._items.forEach((e=>{const t=oe(e,this._suffix,!0);this.appendChild(t)})),this._conditions.forEach((e=>{const t=f(e.target,this._suffix),n=document.getElementById(t);n.addEventListener("input",(()=>{this.checkCondition(n,e)})),this.checkCondition(n,e)}))}checkCondition(e,t){const n=a(e);this.conditionIsValidated(n,t.value,t.operator)&&this.applyTriggers(t)}conditionIsValidated(e,t,n){switch(n){case"EQUAL":return e==t;case"NOT_EQUAL":return e!=t;default:return!1}}applyTriggers(e){e.triggers.forEach((e=>{const t=f(e.target,this._suffix),n=document.getElementById(`container_${t}`);switch(e.action){case"show":n.style.display="block",n.querySelectorAll('[data-validate="false"]').forEach((e=>{e.setAttribute("data-validate",!0)}));break;case"hide":n.style.display="none",n.querySelectorAll('[data-validate="true"]').forEach((e=>{e.setAttribute("data-validate",!1)}))}}))}connectedCallback(){this.render()}set items(e){this._items=e}set conditions(e){this._conditions=e}set suffix(e){this._suffix=e}}customElements.define("conditionnal-form",G);class J extends HTMLElement{constructor(){super(),this._alreadyRendered=!1,this._operator="",this._references=[],this._value=0,this._values=new Map,this._applySuffixToReferences,this._suffix=""}render(){for(const e of this._references)null!=e.loop?this.addLoopListener(e):null!=e.array?this.addArrayListener(e):this.addInputListener(e.target,e.absolute_ref);this._alreadyRendered=!0}addInputListener(e,t=!1){this._applySuffixToReferences&&!t&&(e=`${e}_${this._suffix}`);const n=document.getElementById(e),r=()=>{this._values.set(e,parseFloat(a(n))||0),this.doOperation(),this.dispatchEvent(new Event("input"))};n.addEventListener("input",r),r()}addLoopListener(e){"gather_all"===e.operation_on_children_loop&&document.getElementById(e.loop).addEventListener("has_looped",(()=>{this.addInputsGroupEventListener(e)})),"distinct"===e.operation_on_children_loop&&(this._applySuffixToReferences=!0,this.addInputListener(e.target,e.absolute_ref))}addArrayListener(e){const t=document.getElementById(e.array);t.addEventListener("newRow",(()=>{this.addInputsGroupEventListener(e)})),t.addEventListener("rowDeleted",(()=>{this.addInputsGroupEventListener(e)}))}addInputsGroupEventListener(e){const t=document.querySelectorAll(`[id^="${e.target}"]`);for(const n of t)this.addInputListener(n.id,e.absolute_ref);this.clearMapOldInputs(Array.from(t))}doOperation(){}clearMapOldInputs(e){const t=[...this._values.keys()],n=[];e.forEach((e=>{n.push(e.id)})),t.forEach((e=>{n.includes(e)||this._values.delete(e)})),this.doOperation(),this.dispatchEvent(new Event("input"))}set references(e){this._references=e}set applySuffixToReferences(e){this._applySuffixToReferences=e}connectedCallback(){this._alreadyRendered||(this.setAttribute("hidden",!0),this.render())}static get observedAttributes(){return["operator","suffix"]}attributeChangedCallback(e,t,n){switch(e){case"operator":this._operator=n.toLowerCase();break;case"suffix":this._suffix=n}this.render()}}class K extends J{constructor(){super()}doOperation(){let e;this._values.forEach((t=>{null==e?e=t:0!==t&&(e/=t)})),this.setAttribute("value",Math.round(100*e)/100)}}customElements.define("divide-element",K);class Y extends J{constructor(){super()}doOperation(){const e=Array.from(this._values,(([e,t])=>t));let t=0;if(e.length>0){t=e[0];for(let n=1;n<e.length;n++)t-=e[n]}this.setAttribute("value",t)}}customElements.define("minus-element",Y);class Z extends J{constructor(){super()}doOperation(){let e=1;this._values.forEach((t=>{e*=t})),this.setAttribute("value",e)}}customElements.define("multiply-element",Z);class Q extends J{constructor(){super()}doOperation(){let e=0;this._values.forEach((t=>{e+=t})),this.setAttribute("value",e)}}customElements.define("sum-element",Q);const X=(e,t,n=!1,r)=>{const i=f(e.id,t),o=W(e.schema.operator.toLowerCase());return o.references=e.schema.references,o.setAttribute("id",i),o.setAttribute("data-validate",r||!1),null!=t&&(o.applySuffixToReferences=n,o.setAttribute("suffix",t)),o.setAttribute("operator",e.schema.operator),o},W=e=>{switch(e){case"add":return new Q;case"minus":return new Y;case"divide":return new K;case"multiply":return new Z}};class ee extends HTMLElement{constructor(e,t,n,r,i){super(),this._columns=e,this._computations=t,this._totalConfiguration=n,this._summaryText=r,this._suffix=i,this._rowsCounter=0,this._buttonReference=null,this._totalInputRef=null,this._activeRows=[],this._rendered=!1,this._generated=!1}render(){this._rendered=!0;const e=this.createRowButton();this._buttonReference=e;const t=this.createTotal();this._totalInputRef=t,this.appendChild(e),this.appendChild(t),document.addEventListener("resume-elements-makers",(()=>{this.generateFromActiveRows()}))}createRow(e,t){const n=document.createElement("details");n.id=`row_${this.id}_${e}`,this.insertBefore(n,this._buttonReference);const r=this.createSummary(this._summaryText.replace("$x",this._rowsCounter));n.appendChild(r),n.appendChild(this.createColumns(e,t)),n.appendChild(this.computations(e)),n.appendChild(this.createDeleteRowButton(n.id,e))}createSummary=e=>{const t=document.createElement("summary"),n=document.createElement("p");n.innerText=e;const r=document.createElement("div");return r.innerHTML="<svg width='20' height='20' viewBox='0 0 667 667' xmlns='http://www.w3.org/2000/svg'>\n<path fill-rule='evenodd' clip-rule='evenodd' d='M366.667 233.333C366.667 214.924 351.743 200 333.333 200C314.923 200 300 214.924 300 233.333V300H233.333C214.924 300 200 314.923 200 333.333C200 351.743 214.924 366.667 233.333 366.667H300V433.333C300 451.743 314.923 466.667 333.333 466.667C351.743 466.667 366.667 451.743 366.667 433.333V366.667H433.333C451.743 366.667 466.667 351.743 466.667 333.333C466.667 314.923 451.743 300 433.333 300H366.667V233.333ZM175.002 12.9273C218.293 3.30667 270.81 0 333.333 0C395.857 0 448.373 3.30667 491.663 12.9273C535.333 22.6323 571.627 39.2 599.547 67.1193C627.467 95.0387 644.033 131.334 653.74 175.002C663.36 218.293 666.667 270.81 666.667 333.333C666.667 395.857 663.36 448.373 653.74 491.663C644.033 535.333 627.467 571.627 599.547 599.547C571.627 627.467 535.333 644.033 491.663 653.74C448.373 663.36 395.857 666.667 333.333 666.667C270.81 666.667 218.293 663.36 175.002 653.74C131.334 644.033 95.0387 627.467 67.1193 599.547C39.2 571.627 22.6323 535.333 12.9273 491.663C3.30667 448.373 0 395.857 0 333.333C0 270.81 3.30667 218.293 12.9273 175.002C22.6323 131.334 39.2 95.0387 67.1193 67.1193C95.0387 39.2 131.334 22.6323 175.002 12.9273Z'/>\n</svg>",t.appendChild(n),t.appendChild(r),t};createColumns(e,t){const n=`col_${this.id}_${e}`,r=j(n),i=[];return this._columns.forEach((t=>{const n=Object.assign({},t);n.id=f(n.id,this._suffix);const o=H(n,e,!0);r.appendChild(o),i.push(o.lastChild.id)})),t&&this._activeRows.push(i),r}computations(e){const t=`computations_${this.id}_${e}`,n=j(t);return JSON.parse(JSON.stringify(this._computations)).forEach((t=>{t.schema.references.forEach((e=>{e.target=f(e.target,this._suffix)})),t.id=f(t.id,this._suffix);const r=X(t,e,!0);n.appendChild(r)})),n}createTotal(){const e=JSON.parse(JSON.stringify(this._totalConfiguration));return e.schema.references.forEach((e=>{e.target=f(e.target,this._suffix),e.array=this.id})),X(e,this._suffix,!1,!0)}createRowButton(){const e=document.createElement("button");e.type="button",e.classList.add("array-add-row-button");const t=document.createElement("p");t.innerText="Ajouter un item";const n=document.createElement("div");return n.innerHTML="<svg width='20' height='20' viewBox='0 0 667 667' xmlns='http://www.w3.org/2000/svg'>\n<path fill-rule='evenodd' clip-rule='evenodd' d='M366.667 233.333C366.667 214.924 351.743 200 333.333 200C314.923 200 300 214.924 300 233.333V300H233.333C214.924 300 200 314.923 200 333.333C200 351.743 214.924 366.667 233.333 366.667H300V433.333C300 451.743 314.923 466.667 333.333 466.667C351.743 466.667 366.667 451.743 366.667 433.333V366.667H433.333C451.743 366.667 466.667 351.743 466.667 333.333C466.667 314.923 451.743 300 433.333 300H366.667V233.333ZM175.002 12.9273C218.293 3.30667 270.81 0 333.333 0C395.857 0 448.373 3.30667 491.663 12.9273C535.333 22.6323 571.627 39.2 599.547 67.1193C627.467 95.0387 644.033 131.334 653.74 175.002C663.36 218.293 666.667 270.81 666.667 333.333C666.667 395.857 663.36 448.373 653.74 491.663C644.033 535.333 627.467 571.627 599.547 599.547C571.627 627.467 535.333 644.033 491.663 653.74C448.373 663.36 395.857 666.667 333.333 666.667C270.81 666.667 218.293 663.36 175.002 653.74C131.334 644.033 95.0387 627.467 67.1193 599.547C39.2 571.627 22.6323 535.333 12.9273 491.663C3.30667 448.373 0 395.857 0 333.333C0 270.81 3.30667 218.293 12.9273 175.002C22.6323 131.334 39.2 95.0387 67.1193 67.1193C95.0387 39.2 131.334 22.6323 175.002 12.9273Z'/>\n</svg>",e.appendChild(t),e.appendChild(n),e.addEventListener("click",(()=>{this._rowsCounter+=1,this.createRow(crypto.randomUUID(),!0),o.save(this.id,JSON.stringify(this._activeRows)),this.dispatchEvent(new Event("newRow"))})),e}createDeleteRowButton(e,t){const n=document.createElement("button");n.innerText="Supprimer",n.type="button",n.classList.add("array-delete-row-button"),n.addEventListener("click",(()=>{const n=document.getElementById(e);this.removeChild(n);const r=this._activeRows.findIndex((e=>{for(let n=0;n<e.length;n++)return!!e[n].includes(t)&&(this.deleteRowInLocalStorage(e),!0)}));this._activeRows.splice(r,1),this._rowsCounter-=1,this.updateSummaryText(),o.save(this.id,JSON.stringify(this._activeRows)),this.dispatchEvent(new Event("rowDeleted"))}));const r=document.createElement("div");return r.style="display:flex; flex-direction:row; justify-content:end",r.appendChild(n),r}generateFromActiveRows(){this._generated||(this._activeRows=JSON.parse(o.get(this.id))||[],this._activeRows.forEach((e=>{if(e.length>0){const t=e[0].split("_").pop();null!=t&&(this._rowsCounter+=1,this.createRow(t,!1),this.dispatchEvent(new Event("newRow")))}})),this._generated=!0)}updateSummaryText(){this.querySelectorAll("summary").forEach(((e,t)=>{e.innerText=this._summaryText.replace("$x",t+1)}))}deleteRowInLocalStorage(e){e.forEach((e=>{localStorage.removeItem(e)}))}get columns(){return this._columns}get rowsCounter(){return this._rowsCounter}set totalInputRef(e){this._totalInputRef=e}get totalInputRef(){return this._totalInputRef}get activeRows(){return this._activeRows}connectedCallback(){this._rendered||this.render()}}customElements.define("array-element",ee);const te=["","un","deux","trois","quatre","cinq","six","sept","huit","neuf"],ne=["","dix","vingt","trente","quarante","cinquante","soixante","soixante-dix","quatre-vingt","quatre-vingt-dix"],re={11:"onze",12:"douze",13:"treize",14:"quatorze",15:"quinze",16:"seize",21:"vingt-et-un",31:"trente-et-un",41:"quarante-et-un",51:"cinquante-et-un",61:"soixante-et-un",71:"soixante-et-onze",72:"soixante-douze",73:"soixante-treize",74:"soixante-quatorze",75:"soixante-quinze",76:"soixante-seize",91:"quatre-vingt-onze",92:"quatre-vingt-douze",93:"quatre-vingt-treize",94:"quatre-vingt-quatorze",95:"quatre-vingt-quinze",96:"quatre-vingt-seize"};class ie extends HTMLElement{constructor(e,t){super(),this._targetId=e,this._value=null,this._suffix=t}render(){if(!this._targetId)throw new Error("NumberToLetter target in null or undefined");this.hidden=!0;const e=document.getElementById(f(this._targetId,this._suffix));this.value=o.get(this.id),e.addEventListener("input",(e=>{const t=a(e.target);this.value=this.numberToLetter(parseInt(t)||0),o.save(this.id,this.value),this.dispatchEvent(new Event("input"))}))}numberToLetter(e){if(0===e)return"zéro";function t(e){const t=Math.floor(e/100),n=e%100;let r="",i="";return t>1?r=te[t]+" cent":1===t&&(r=" cent"),n>0&&(i=function(e){if(e in re)return re[e];const t=e%10,n=Math.floor(e/10);return" "+ne[n]+" "+te[t]}(n)),r+i}let n="";if(e>=1e6){const r=Math.floor(e/1e6);e%=1e6,n+=t(r)+" million",r>1&&(n+="s"),e>0&&(n+=" ")}if(e>=1e3){const r=Math.floor(e/1e3);e%=1e3,n+=t(r)+" mille",e>0&&(n+=" ")}if(e>0&&(n+=t(e)),n=n.trim(),"quatre-vingt"===n)return"quatre-vingts";let r=n.split(" ");if(r=r.filter((e=>""!==e)),r.length>1){const e=r[r.length-1];if("cent"===e&&(r[r.length-1]="cents"),e.includes("vingt")){let t="vingts";const n=e.split("-");"vingt"===n[n.length-1]&&(n[n.length-1]="vingts",t=n.join("-")),r[r.length-1]=t}}return n=r.join("-"),n.toUpperCase()}connectedCallback(){this.render()}}customElements.define("number-to-letter",ie);const oe=(e,t,n)=>{switch(e.schema.type){case"input":return H(e,t,n);case"radio":return((e,t,n)=>{const r=f(e.id,t),i=j(r,["input-container"]),o=new U;return o.setAttribute("id",r),o.setAttribute("label",e.label),o.setAttribute("choices",JSON.stringify(e.schema.choices)),o.setAttribute("data-validate",n||!1),i.appendChild(o),i})(e,t,n);case"radio_with_other":return((e,t,n)=>{const r=f(e.id,t),i=j(r,["input-container"]),o=new $;return o.setAttribute("id",r),o.setAttribute("label",e.label),o.setAttribute("choices",JSON.stringify(e.schema.choices)),o.setAttribute("format",JSON.stringify(e.schema.format)),o.setAttribute("placeholder",JSON.stringify(e.schema.placeholder)),o.setAttribute("data-validate",n||!1),i.appendChild(o),i})(e,t,n);case"select":return((e,t,n)=>{const r=f(e.id,t),i=j(r,["input-container"]),a=z(r,e.schema.choices);return a.value=o.get(r)||e.schema.choices[0]||void 0,a.setAttribute("data-validate",n||!1),a.addEventListener("change",(()=>{o.save(r,a.value)})),null!=e.label&&i.appendChild(q(r,e.label,e.description)),document.addEventListener("contract-generated",(()=>{a.dispatchEvent(new Event("input")),a.dispatchEvent(new Event("change"))})),i.appendChild(a),i})(e,t,n);case"select_with_other":return((e,t,n)=>{const r=f(e.id,t),i=j(r,["input-container"]),o=new V;return o.setAttribute("id",r),o.setAttribute("choices",JSON.stringify(e.schema.choices)),o.setAttribute("placeholder",e.schema.placeholder),o.setAttribute("format",e.schema.format),o.setAttribute("label",e.label),o.setAttribute("description",e.description),o.setAttribute("input_rules",JSON.stringify(e.schema.rules||"")),o.setAttribute("data-validate",n||!1),i.appendChild(o),i})(e,t,n);case"conditional_form":return((e,t)=>{const n=f(e.id,t),r=j(n,["input-container"]),i=new G;return i.setAttribute("id",n),i.items=e.schema.items,i.conditions=e.schema.conditions,i.suffix=t,r.appendChild(i),r})(e,t);case"form_group":return((e,t)=>{const n=f(e.id,t),r=j(n),i=document.getElementById("workspace");if(i.appendChild(r),void 0!==e.label){const t=q(n,e.label,e.description);r.appendChild(t)}return e.schema.items.forEach((e=>{r.appendChild(oe(e,t,!0))})),i.removeChild(r),r})(e,t);case"loop":return _e(e);case"computed":return X(e,t,!1,n);case"array":return((e,t)=>{const n=f(e.id,t),r=j(n,["input-container"]),i=new ee(e.schema.columns,e.schema.computations,e.schema.total,e.label,t);return i.setAttribute("id",n),r.appendChild(i),r})(e,t);case"date_adder":return((e,t,n)=>{const r=f(e.id,t),i=j(r),a=k("date",r,r,o.get(r));a.setAttribute("data-validate",n||!1),a.addEventListener("change",(()=>{o.save(r,a.value)}));const s=document.getElementById(e.schema.target);if("date"!==s.type)throw new Error("date adder target must be of type date");return s.addEventListener("change",(()=>{const t=s.valueAsDate;null!=t&&(t.setDate(t.getDate()+parseInt(e.schema.days)||0),t.setMonth(t.getMonth()+parseInt(e.schema.months)||0),t.setFullYear(t.getFullYear()+parseInt(e.schema.years)||0),a.setAttribute("value",t.toISOString().split("T")[0]))})),i.appendChild(a),i.hidden=!0,document.addEventListener("contract-generated",(()=>{a.dispatchEvent(new Event("input")),a.dispatchEvent(new Event("change"))})),i})(e,t,n);case"number_to_letter":return((e,t,n)=>{const r=f(e.id,t),i=new ie(e.schema.target,t);return i.setAttribute("id",r),i})(e,t);default:return document.createElement("div")}},ae=(e,t=[],n)=>{const r=document.getElementById("page_number_total");le(r.value,e);const o=de(e,n),a=document.getElementById("workspace");a.appendChild(o),fe(o,t),a.removeChild(o),document.getElementById("contract-form").insertBefore(o,document.getElementById(`page_${e+1}`));let s=parseInt(r.value);return s+=1,r.setAttribute("value",s++),r.dispatchEvent(new Event("input")),i.createSegmentAt(e-1),o},se=e=>{const t=document.getElementById("page_number_total"),n=document.getElementById(e),r=pe(e);ce(t.value,r),document.getElementById("contract-form").removeChild(n);let o=parseInt(t.value);o-=1,t.setAttribute("value",o),t.dispatchEvent(new Event("input")),i.deleteSegmentAt(r-1)},le=(e,t)=>{ue(e,t,(e=>`page_${parseInt(e)+1}`))},ce=(e,t)=>{ue(e,t,(e=>"page_"+(parseInt(e)-1)))},ue=(e,t,n)=>{const r=[],i=[];for(let o=t;o<=e;o++){const e=o,t=document.getElementById(`page_${e}`);r.push(t),i.push(n(e))}for(let e=0;e<r.length;e++)r[e].id=i[e]},de=(e,t)=>{const n=document.createElement("div");return n.id=`page_${e}`,n.hidden=!0,he(n,t),n},he=(e,t)=>{null!=t&&e.setAttribute("data-page-title",t)},fe=(e,t,n)=>{t.forEach((t=>{e.appendChild(oe(t,n,!0))}))},pe=e=>parseInt(e.split("_").pop());class me extends HTMLElement{constructor(e,t){super(),this._items=e,this._iteratorId,this._label=t||"",this._iteratorReference={},this._createdPageCount=0,this._startingPageNumber=0}render(){const e=document.getElementById(this._iteratorId);null!=e&&this._items!=[]&&(this._iteratorReference=e,this.applyLoop=this.applyLoop.bind(this),e.removeEventListener("input",this.applyLoop,!0),e.addEventListener("input",this.applyLoop,!0),document.addEventListener("resume-page-maker-elements",(()=>{this.resume()})))}applyLoop(){const e=parseInt(a(this._iteratorReference));if(isNaN(e))return;this._startingPageNumber=parseInt(this.previousSibling.id.split("_").pop())+1;const t=this._createdPageCount-e,n=e-this._createdPageCount;t>0&&this.deletePages(e),n>0&&this.addPages(n),this._createdPageCount=e,this.dispatchEvent(new Event("has_looped"))}deletePages(e){for(let t=this._createdPageCount;t>e;t--){const e="page_"+(parseInt(this._startingPageNumber)+t-1);se(e)}}addPages(e){const t=parseInt(this._startingPageNumber)+parseInt(this._createdPageCount),n=parseInt(this._startingPageNumber)+parseInt(this._createdPageCount)+parseInt(e)-1;let r=this._createdPageCount;for(let e=t;e<=n;e++){const t=this._label.replace("$x",r+1)||"",n=ae(e,[],t);this._items.forEach((e=>{const t=oe(e,r,!0);n.appendChild(t)})),r++}}resume(){console.log("coucou"),this.applyLoop()}set items(e){this._items=e}connectedCallback(){this.render()}static get observedAttributes(){return["iterator_id"]}attributeChangedCallback(e,t,n){"iterator_id"===e&&(this._iteratorId=n),this.render()}}const _e=e=>{const t=document.getElementById("contract-form"),n=new me(e.schema.items,e.label);return t.appendChild(n),n.setAttribute("id",e.id),n.setAttribute("iterator_id",e.schema.iterator),n};customElements.define("loop-el",me);const ve={generate:e=>{let t=1;e.forEach((e=>{"loop"===e.schema.items[0].schema.type?_e(e.schema.items[0],t):(((e,t)=>{const n=de(t,e.label);document.getElementById("contract-form").appendChild(n),fe(n,e.schema.items)})(e,t),t+=1)})),document.getElementById("page_number_total").setAttribute("value",t-1);const n=document.getElementById("page_1");n.hidden=!1,document.getElementById("page-title").innerText=n.getAttribute("data-page-title")},resume:()=>{const e=document.getElementById("contract-form");let t=e.querySelectorAll('[id^="page_"]');for(let n=0;n<t.length;n++){const r=t[n],o=parseInt(r.id.split("_").pop());s(o)?i.segmentIsValid(o-1):i.segmentIsNotValid(o-1),t=e.querySelectorAll('[id^="page_"]')}}},ge=ve;var be=n(829),ye=n.n(be);function Ee(e){return function(e){if(Array.isArray(e))return we(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?we(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ce,Ae,xe,Ie,Le,Oe=(Ce=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],Ae=function(){function e(t){var n=t.targetModal,r=t.triggers,i=void 0===r?[]:r,o=t.onShow,a=void 0===o?function(){}:o,s=t.onClose,l=void 0===s?function(){}:s,c=t.openTrigger,u=void 0===c?"data-micromodal-trigger":c,d=t.closeTrigger,h=void 0===d?"data-micromodal-close":d,f=t.openClass,p=void 0===f?"is-open":f,m=t.disableScroll,_=void 0!==m&&m,v=t.disableFocus,g=void 0!==v&&v,b=t.awaitCloseAnimation,y=void 0!==b&&b,E=t.awaitOpenAnimation,w=void 0!==E&&E,C=t.debugMode,A=void 0!==C&&C;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modal=document.getElementById(n),this.config={debugMode:A,disableScroll:_,openTrigger:u,closeTrigger:h,openClass:p,onShow:a,onClose:l,awaitCloseAnimation:y,awaitOpenAnimation:w,disableFocus:g},i.length>0&&this.registerTriggers.apply(this,Ee(i)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var t;return(t=[{key:"registerTriggers",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.filter(Boolean).forEach((function(t){t.addEventListener("click",(function(t){return e.showModal(t)}))}))}},{key:"showModal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation?this.modal.addEventListener("animationend",(function t(){e.modal.removeEventListener("animationend",t,!1),e.setFocusToFirstNode()}),!1):this.setFocusToFirstNode(),this.config.onShow(this.modal,this.activeElement,t)}},{key:"closeModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,e),this.config.awaitCloseAnimation){var n=this.config.openClass;this.modal.addEventListener("animationend",(function e(){t.classList.remove(n),t.removeEventListener("animationend",e,!1)}),!1)}else t.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(e){this.modal=document.getElementById(e),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(e){if(this.config.disableScroll){var t=document.querySelector("body");switch(e){case"enable":Object.assign(t.style,{overflow:""});break;case"disable":Object.assign(t.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(e){(e.target.hasAttribute(this.config.closeTrigger)||e.target.parentNode.hasAttribute(this.config.closeTrigger))&&(e.preventDefault(),e.stopPropagation(),this.closeModal(e))}},{key:"onKeydown",value:function(e){27===e.keyCode&&this.closeModal(e),9===e.keyCode&&this.retainFocus(e)}},{key:"getFocusableNodes",value:function(){var e=this.modal.querySelectorAll(Ce);return Array.apply(void 0,Ee(e))}},{key:"setFocusToFirstNode",value:function(){var e=this;if(!this.config.disableFocus){var t=this.getFocusableNodes();if(0!==t.length){var n=t.filter((function(t){return!t.hasAttribute(e.config.closeTrigger)}));n.length>0&&n[0].focus(),0===n.length&&t[0].focus()}}}},{key:"retainFocus",value:function(e){var t=this.getFocusableNodes();if(0!==t.length)if(t=t.filter((function(e){return null!==e.offsetParent})),this.modal.contains(document.activeElement)){var n=t.indexOf(document.activeElement);e.shiftKey&&0===n&&(t[t.length-1].focus(),e.preventDefault()),!e.shiftKey&&t.length>0&&n===t.length-1&&(t[0].focus(),e.preventDefault())}else t[0].focus()}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}(),xe=null,Ie=function(e){if(!document.getElementById(e))return console.warn("MicroModal: ❗Seems like you have missed %c'".concat(e,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(e,'"></div>')),!1},Le=function(e,t){if(function(e){e.length<=0&&(console.warn("MicroModal: ❗Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(e),!t)return!0;for(var n in t)Ie(n);return!0},{init:function(e){var t=Object.assign({},{openTrigger:"data-micromodal-trigger"},e),n=Ee(document.querySelectorAll("[".concat(t.openTrigger,"]"))),r=function(e,t){var n=[];return e.forEach((function(e){var r=e.attributes[t].value;void 0===n[r]&&(n[r]=[]),n[r].push(e)})),n}(n,t.openTrigger);if(!0!==t.debugMode||!1!==Le(n,r))for(var i in r){var o=r[i];t.targetModal=i,t.triggers=Ee(o),xe=new Ae(t)}},show:function(e,t){var n=t||{};n.targetModal=e,!0===n.debugMode&&!1===Ie(e)||(xe&&xe.removeEventListeners(),(xe=new Ae(n)).showModal())},close:function(e){e?xe.closeModalById(e):xe.closeModal()}});"undefined"!=typeof window&&(window.MicroModal=Oe);const Re=Oe,Te=()=>{Re.show("dialog")},Se=()=>{Re.close("dialog")},je=e=>{const t=document.getElementById("modal-content");t.replaceChildren(""),t.innerText=e},ke="Un problème est survenu lors de la récupération du contrat. Veuillez contacter un administrateur.",Pe=(()=>{const e=()=>{const e=o.get("report");let n=JSON.parse(e)||[];if(o.save("filled_contract",document.getElementById("preview").innerHTML),n.length<=0)return void(window.location.href="/payment?contract_name="+o.getContractName());const r=t();var i;document.getElementById("dialog-title").innerText="Etes vous sûrs de vouloir poursuivre ? Certaines réponses sont incomplètes:",i=r,document.getElementById("modal-content").replaceChildren(""),document.getElementById("modal-content").appendChild(i),Te()},t=()=>{const e=document.createElement("div");let t=JSON.parse(o.get("report"))||[];t.sort(),t.forEach((t=>{const n=`Page ${t} - ${document.getElementById(`page_${t}`).dataset.pageTitle}`,r=document.createElement("p");r.innerText=n,r.classList.add("report-line"),r.addEventListener("click",(e=>{l(((e,n,r)=>(i.selectSegment(t-1),t)))(),Se()})),e.appendChild(r)}));const a=document.createElement("div");return a.classList.add("report-modal-buttons-container"),a.appendChild(n()),a.appendChild(r(parseInt(t[0])||void 0)),e.appendChild(a),e},n=()=>{const e=document.createElement("a");return e.classList.add("pay-button"),e.innerText="PAYER",e.href="/payment?contract_name="+o.getContractName(),e},r=e=>{const t=document.createElement("button");return t.innerText="Retour sur le formulaire",t.addEventListener("click",(()=>{e&&(l(((t,n,r)=>(i.selectSegment(e-1),e)))(),Se())})),t.classList.add("back-to-form"),t};return{init:t=>{document.getElementById(t.nextButtonId).addEventListener("form-ended",e)}}})();window.onload=async()=>{Re.init({onClose:e=>console.info(`${e.id} is hidden`),closeTrigger:"data-custom-close",openClass:"is-open",disableScroll:!0,disableFocus:!1,awaitOpenAnimation:!1,awaitCloseAnimation:!1,debugMode:!1}),Te(),je("Chargement de votre contrat...");const n=new URLSearchParams(window.location.search),r=n.get("contract_name")||void 0,a="true"===n.get("resume")||!1;if(!r)return je("Aucun contrat n'a été sélectionné."),void window.history.back();o.init(r),a||o.clear();const{jsonData:s,parsedTemplateDOM:c,paymentLink:u}=await(async(e,t,n)=>{const r=new(ye())({apiKey:n}).base(e),i=await r("Template").select({filterByFormula:`{Nom} = "${t}"`,maxRecords:1}).firstPage();if(!i||i.length<1)throw je(ke),new Error("Unknown contract or base");const o=i[0];if(!(e=>e.fields&&e.fields.JSON&&e.fields.JSON[0])(o))throw je(ke),new Error('Missing "JSON" in template.');const a=JSON.parse(o.fields.JSON[0]);if(!o.fields||!o.fields["Template Content"])throw je(ke),new Error('Field "Template Content" is missing in the template.');if(!o.fields["Stripe Payment Link"])throw je(ke),new Error('Field "Stripe Payment Link" is missing in the template.');const s=o.fields["Template Content"];return{jsonData:a,parsedTemplateDOM:(new DOMParser).parseFromString(s,"text/html"),paymentLink:o.fields["Stripe Payment Link"]}})(contractDBID,r,contractDBKey);ge.generate(s),(e=>{let t=e.body.innerHTML;const n=t.split(/\r\n|\n/);t=S(n).join(""),document.getElementById("preview").innerHTML+=t,(()=>{const e=document.getElementById("preview").clientWidth,t=R(e,16),n=R(e,32),r=R(e,23),i=document.createElement("style");i.setAttribute("id","preview-css");const o=`#preview p, #preview ul {font-size:${t}px !important;} #preview h1 {font-size:${n}px !important;} #preview h2 {font-size:${r}px !important;} `;i.textContent=o,document.getElementsByTagName("head")[0].appendChild(i)})()})(c),i.init({container:"progress-bar",activeSegmentClass:"progress-active",validSegmentClass:"progress-valid",invalidSegmentClass:"progress-invalid",segmentClass:"progress-segment",onSegmentClick:l(((e,t,n)=>{const r=n.target.parentElement,o=Array.from(r.children).indexOf(n.target);return i.selectSegment(o),o+1})),getSegmentCount:()=>parseInt(document.getElementById("page_number_total").value)}),Pe.init({nextButtonId:"next_button"}),(()=>{const n=l(e);document.getElementById("next_button").addEventListener("click",n);const r=l(t);document.getElementById("prev_button").addEventListener("click",r)})(),!0===a&&(console.log("baba"),document.dispatchEvent(new Event("resume-page-maker-elements")),document.dispatchEvent(new Event("resume-elements-makers")),document.dispatchEvent(new Event("contract-generated")),ge.resume()),o.save("payment_link",u),localStorage.setItem(r,!0),Se()}})()})();
